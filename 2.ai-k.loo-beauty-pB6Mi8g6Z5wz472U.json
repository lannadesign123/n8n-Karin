{"createdAt":"2025-06-20T23:15:29.503Z","updatedAt":"2025-07-13T21:00:17.187Z","id":"pB6Mi8g6Z5wz472U","name":"2.Ai K.Loo Beauty","active":false,"isArchived":false,"nodes":[{"parameters":{"resource":"file","fileId":"={{ $json.photo_file_id }}"},"id":"c95e317b-95df-4e9b-911e-cd24cd63a588","name":"Get Image1","type":"n8n-nodes-base.telegram","position":[340,380],"typeVersion":1.2,"webhookId":"8b210039-e135-420d-a5f1-53fc3ca1e836","retryOnFail":false,"maxTries":2,"credentials":{"telegramApi":{"id":"iZNX6D8v0FBJG5wC","name":"/Ai_Beauty_agent_bot"}}},{"parameters":{"operation":"toBinary","sourceProperty":"data","options":{"fileName":"={{ $('Get ready1').item.json.photo_file_id }}"}},"id":"aa21ff8d-b49c-4c93-a854-94450cd5e73c","name":"Convert1","type":"n8n-nodes-base.convertToFile","position":[740,380],"typeVersion":1.1},{"parameters":{"assignments":{"assignments":[{"id":"07282534-971f-4430-8d45-5f3e15d3c167","name":"photo_file_id","value":"={{ $json.message.photo[0].file_id }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[160,380],"id":"f3879969-a016-44cf-96b6-5009a0b3d8ec","name":"Get ready1"},{"parameters":{"operation":"binaryToPropery","options":{}},"id":"3a9d0dd2-e983-4f6a-a010-46529a6bfcba","name":"Extract1","type":"n8n-nodes-base.extractFromFile","position":[540,380],"typeVersion":1},{"parameters":{"resource":"image","operation":"analyze","modelId":{"__rl":true,"value":"chatgpt-4o-latest","mode":"list","cachedResultName":"CHATGPT-4O-LATEST"},"text":"=You are a certified dermatologist.\n\nInput: A photo of a client‚Äôs face.\n\nYour task:\n\nAnalyze the skin in the image.\n\nDetermine the likely skin type: –∂–∏—Ä–Ω–∞—è / —Å—É—Ö–∞—è / –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è / –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è.\n\nIndicate your confidence level as a percentage between 0 and 100.\n\nIf the face is not visible or analysis is not possible ‚Äî return an empty list.\n\nRespond strictly in JSON format. No explanations, no comments, no text outside the JSON.\n\n\nExample:\n{\n  \"candidates\": [\n    { \"Type skin\": \"–∂–∏—Ä–Ω–∞—è\", }\n  ]\n}\n","inputType":"base64","simplify":false,"options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[980,380],"id":"06f850e4-a9f0-49f6-85df-c5e82c0f60d3","name":"VISION","retryOnFail":true,"notesInFlow":false,"executeOnce":false,"credentials":{"openAiApi":{"id":"N0DXVxFFyshgrkn2","name":"OpenAi account"}}},{"parameters":{"functionCode":"const visionRaw = $json?.skin_type || \"\";\nlet visionParsed = {};\nlet detectedSkinType = null;\nlet confidence = null;\n\nconst msgId = $json?.message_id || \"000\";\nconst chatId = $json?.chat_id?.toString() || null;\n\ntry {\n  const cleaned = visionRaw.trim().replace(/^```json/, '').replace(/```$/, '').trim();\n  visionParsed = JSON.parse(cleaned);\n\n  const candidate = visionParsed?.candidates?.[0] || {};\n  detectedSkinType = (\n    candidate[\"Type skin\"] ||\n    candidate[\"type_skin\"] ||\n    candidate[\"–¢–∏–ø –∫–æ–∂–∏\"]\n  )?.toLowerCase() || null;\n\n  confidence = candidate.Confidence || candidate.confidence || null;\n\n  console.log(\"‚úÖ –û–ø—Ä–µ–¥–µ–ª—ë–Ω —Ç–∏–ø –∫–æ–∂–∏:\", detectedSkinType);\n} catch (error) {\n  console.log(\"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ JSON.parse:\", error.message);\n}\n\nconst cbYes = `Type_skin_yes_${msgId}`;\nconst cbManual = `Type_skin_manual_${msgId}`;\nconst cbOily = `skin_select_oily_${msgId}`;\nconst cbDry = `skin_select_dry_${msgId}`;\nconst cbCombo = `skin_select_combo_${msgId}`;\nconst cbNormal = `skin_select_normal_${msgId}`;\n\n// –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ skin_detected –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ SWITCH\nif (detectedSkinType) {\n  return [{\n    json: {\n      skin_detected: true,\n      step: \"confirm_skin_type_from_photo\",\n      route: \"skin_type_confirmed\",\n      message_id: msgId,\n      chat_id: chatId,\n      type_skin: detectedSkinType,\n      confidence,\n      cb_yes: cbYes,\n      cb_no: cbManual,\n      text: `üå∏üë∏ –Ø –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∞ —Ñ–æ—Ç–æ –∏ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—é, —á—Ç–æ —É —Ç–µ–±—è *${detectedSkinType}* –∫–æ–∂–∞. –≠—Ç–æ –≤–µ—Ä–Ω–æ?`,\n      reply_markup: {\n        inline_keyboard: [\n          [\n            { text: \"‚úÖ –í–µ—Ä–Ω–æ\", callback_data: cbYes },\n            { text: \"‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å\", callback_data: cbManual }\n          ]\n        ]\n      }\n    }\n  }];\n} else {\n  return [{\n    json: {\n      skin_detected: false,\n      step: \"skin_manual_buttons\",\n      route: \"skin_type_not_detected\",\n      message_id: msgId,\n      chat_id: chatId,\n      type_skin: null,\n      text: \"ü§î –ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø –∫–æ–∂–∏ –ø–æ —Ñ–æ—Ç–æ.\\nüëá –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏ —Å–≤–æ–π —Ç–∏–ø –∫–æ–∂–∏:\",\n      reply_markup: {\n        inline_keyboard: [\n          [\n            { text: \"–ñ–∏—Ä–Ω–∞—è\", callback_data: cbOily },\n            { text: \"–°—É—Ö–∞—è\", callback_data: cbDry }\n          ],\n          [\n            { text: \"–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è\", callback_data: cbCombo },\n            { text: \"–ù–æ—Ä–º–∞–ª—å–Ω–∞—è\", callback_data: cbNormal }\n          ]\n        ]\n      },\n      skin_options: {\n        oily: cbOily,\n        dry: cbDry,\n        combo: cbCombo,\n        normal: cbNormal\n      }\n    }\n  }];\n}\n"},"id":"aea1b963-a3ad-40e5-9acb-ac3157c42d87","name":"Parse Vision","type":"n8n-nodes-base.function","typeVersion":1,"position":[1400,380]},{"parameters":{"updates":["*"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[-1020,1280],"id":"afb9d234-b151-47a7-99d6-10109a5228db","name":"Telegram Trigger","webhookId":"e4d6b058-dc8c-4130-9abd-41243518e824","credentials":{"telegramApi":{"id":"iZNX6D8v0FBJG5wC","name":"/Ai_Beauty_agent_bot"}}},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"bfa3969a-c488-4515-b5ab-a4b0ea89b74b","leftValue":"={{ $json.message.text }}","rightValue":"/start","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"—Å—Ç–∞—Ä—Ç"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"5eeb9b3f-d4ce-45f6-bb62-32244fd9a99a","leftValue":"={{ $json.message.photo[1] }}","rightValue":"","operator":{"type":"object","operation":"exists","singleValue":true}}],"combinator":"and"},"renameOutput":true,"outputKey":"image_"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"a70a7c4e-ba89-44c0-b8f2-658566d46c90","leftValue":"={{ $json.callback_query.data }}","rightValue":"skin_select_normal_1068","operator":{"type":"string","operation":"startsWith"}}],"combinator":"and"},"renameOutput":true,"outputKey":"normal_"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"d83d5cb3-826c-4cf0-b7ad-d789dca53ddb","leftValue":"={{ $json.callback_query.data }}","rightValue":"budget_budget_800","operator":{"type":"string","operation":"startsWith"}}],"combinator":"and"},"renameOutput":true,"outputKey":"budget_800"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"e3bf500e-57d1-4572-b54f-8f3fa95a34e4","leftValue":"={{ $json.callback_query.data }}","rightValue":"pay_sub","operator":{"type":"string","operation":"startsWith"}}],"combinator":"and"},"renameOutput":true,"outputKey":"–ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"1b02cf08-4548-47c8-878a-3071c61ef96d","leftValue":"={{ $json.callback_query.data }}","rightValue":"ready_for_offer","operator":{"type":"string","operation":"equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"–≤—ã–±–æ—Ä –ø–æ–¥–ø–∏—Å–∫–∏"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"e0feea5a-3500-4a03-a5c0-e921e8c33886","leftValue":"={{ $json.message.text }}","rightValue":"/v","operator":{"type":"string","operation":"startsWith"}}],"combinator":"and"},"renameOutput":true,"outputKey":"—Å–≤–æ–π –æ—Ç–≤–µ—Ç"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"589befe2-5c74-4532-a0ce-d0139422a1bd","leftValue":"={{ $json.message.text }}","rightValue":"=/support","operator":{"type":"string","operation":"startsWith"}}],"combinator":"and"},"renameOutput":true,"outputKey":"support"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"fcfdfc94-aa7e-4bed-a582-1a8f69446248","leftValue":"={{ $json.callback_query.data }}","rightValue":"skin_select_","operator":{"type":"string","operation":"equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"skin_select_"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"a4e1a778-873f-4ba8-a803-2a3459f255a7","leftValue":"={{ $json.callback_query.message.reply_markup.inline_keyboard[0][1].callback_data }}","rightValue":"budget_1000","operator":{"type":"string","operation":"startsWith"}}],"combinator":"and"},"renameOutput":true,"outputKey":"budget_1000"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"97e1f856-31ae-448f-b04f-0d661cc66e5c","leftValue":"={{ $json.callback_query.message.reply_markup.inline_keyboard[1][0].callback_data }}","rightValue":"budget_2000","operator":{"type":"string","operation":"startsWith"}}],"combinator":"and"},"renameOutput":true,"outputKey":"budget_2000"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"7431c3cd-bde0-4e60-8e04-c5520f22dbcb","leftValue":"={{ $json.callback_query.message.reply_markup.inline_keyboard[1][1].callback_data }}","rightValue":"budget_unlimited","operator":{"type":"string","operation":"startsWith"}}],"combinator":"and"},"renameOutput":true,"outputKey":"budget_unlimited"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"72058a8f-1bdf-483a-bde7-f37d079336ab","leftValue":"={{ $json.callback_query.message.reply_markup.inline_keyboard[2][0].callback_data }}","rightValue":"skin_select_oily_1068","operator":{"type":"string","operation":"startsWith"}}],"combinator":"and"},"renameOutput":true,"outputKey":"oily_"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"fc445d0c-46e0-47a8-a2a5-9ecb5ebdaa73","leftValue":"={{ $json.callback_query.message.reply_markup.inline_keyboard[1][0].callback_data }}","rightValue":"skin_select_combo_1068","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"combo_"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"6412ef83-8067-4d06-ba04-d40716331222","leftValue":"={{ $json.callback_query.message.reply_markup.inline_keyboard[0][0].callback_data }}","rightValue":"skin_select_dry_1068","operator":{"type":"string","operation":"startsWith"}}],"combinator":"and"},"renameOutput":true,"outputKey":"dry_"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"eae8440b-5dbb-4297-bb7d-df61c905786d","leftValue":"={{ $json.callback_query.message.reply_markup.inline_keyboard[0][0].callback_data }}","rightValue":"–∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è","operator":{"type":"string","operation":"startsWith"}}],"combinator":"and"},"renameOutput":true,"outputKey":"–∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"710a4408-626e-4bcf-a333-f4aec1921699","leftValue":"={{ $json.callback_query.message.rep—Å—É—Ö–ø—èly_markup.inline_keyboard[0][0].callback_data }}","rightValue":"—Å—É—Ö–∞—è","operator":{"type":"string","operation":"startsWith"}}],"combinator":"and"},"renameOutput":true,"outputKey":"—Å—É—Ö–∞—è"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"b4c1dfe6-ae59-495d-ac08-0e8a8bcdd894","leftValue":"={{ $json.callback_query.data }}","rightValue":"–∂–∏—Ä–Ω–∞—è","operator":{"type":"string","operation":"startsWith"}}],"combinator":"and"},"renameOutput":true,"outputKey":"–∂–∏—Ä–Ω–∞—è"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"98c134a9-d964-4258-b71b-71f996eee6a4","leftValue":"={{ $json.callback_query.data }}","rightValue":"–Ω–æ—Ä–º–∞–ª—å–Ω–∞—è","operator":{"type":"string","operation":"startsWith"}}],"combinator":"and"},"renameOutput":true,"outputKey":"–Ω–æ—Ä–º–∞–ª—å–Ω–∞—è"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"efd64c0e-28cf-466e-ac16-86077a6e2483","leftValue":"={{ $json.callback_query.message.reply_markup.inline_keyboard[0][0].callback_data }}","rightValue":"skin_select_dry_1155","operator":{"type":"string","operation":"startsWith"}}],"combinator":"and"},"renameOutput":true,"outputKey":"ü©∏–°—É—Ö–∞—è"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"af232095-a5e0-4b5c-8949-367fb0b256c4","leftValue":"={{ $json.callback_query.message.reply_markup.inline_keyboard[1][0].callback_data }}","rightValue":"skin_select_combo_1155","operator":{"type":"string","operation":"startsWith"}}],"combinator":"and"},"renameOutput":true,"outputKey":"‚òØÔ∏è –ö–æ–º–±–∏"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"d4583b76-2d81-48c1-ac0c-719607173558","leftValue":"={{ $json.callback_query.message.reply_markup.inline_keyboard[2][0].callback_data }}","rightValue":"skin_select_oily_1155","operator":{"type":"string","operation":"startsWith"}}],"combinator":"and"},"renameOutput":true,"outputKey":"‚òØÔ∏è –ö–æ–º–±–∏"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"75d12c34-acb1-4b0e-9b49-e64fdc9b48bf","leftValue":"={{ $json.callback_query.message.reply_markup.inline_keyboard[3][0].callback_data }}","rightValue":"skin_select_normal_1155","operator":{"type":"string","operation":"startsWith"}}],"combinator":"and"},"renameOutput":true,"outputKey":"‚úÖ –ù–æ—Ä–º"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"04299fcf-ed58-4002-a582-fa2045f9da0e","leftValue":"={{ $json.callback_query.data }}","rightValue":"sub_2months","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"2 –º–µ—Å—è—Ü–∞"}]},"options":{}},"type":"n8n-nodes-base.switch","typeVersion":3.2,"position":[-760,860],"id":"733082f5-db03-412a-af1f-a0cb1eb00dbb","name":"Switch"},{"parameters":{"jsCode":"// –ü–æ–ª—É—á–∞–µ–º –ø–µ—Ä–≤—É—é –∑–∞–ø–∏—Å—å –∏–∑ Google Sheets1\nconst sheetData = $items(\"Append or update row in sheet6\")[0].json;\n\n// –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–∏–ø –∫–æ–∂–∏, –µ—Å–ª–∏ –µ—Å—Ç—å, –∏–Ω–∞—á–µ —Å—Ç–∞–≤–∏–º \"–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π\"\nconst skinType = sheetData[\"skin_type\"]?.trim() || \"–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π\";\n\n// –ü–æ–ª—É—á–∞–µ–º chat_id –∏ message_id\nconst chatId = sheetData[\"chat_id\"];\n\n// –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–∞–º–∏ –≤—ã–±–æ—Ä–∞ –±—é–¥–∂–µ—Ç–∞\nreturn {\n  json: {\n    step: \"ask_budget\",\n    chat_id: chatId,\n    type_skin: skinType,\n    text: `üí∞–ö–∞–∫–æ–π —É —Ç–µ–±—è –±—é–¥–∂–µ—Ç –Ω–∞ —É—Ö–æ–¥–æ–≤—ã–π —Ç–æ–≤–∞—Ä –¥–ª—è —Ç–∏–ø–∞ –∫–æ–∂–∏ *${skinType}*?`,\n    reply_markup: {\n      inline_keyboard: [\n        [\n          { text: \"–¥–æ 800‚ÇΩ\", callback_data: \"budget_800\" },\n          { text: \"–¥–æ 1000‚ÇΩ\", callback_data: \"budget_1000\" }\n        ],\n        [\n          { text: \"–¥–æ 2000‚ÇΩ\", callback_data: \"budget_2000\" },\n          { text: \"–ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π\", callback_data: \"budget_unlimited\" }\n        ]\n      ]\n    }\n  }\n};\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[600,960],"id":"d4dd29e0-b846-49ed-a5b2-97bf078e79e8","name":"–ë—é–¥–∂–µ—Ç"},{"parameters":{"chatId":"={{ $('Telegram Trigger').item.json.callback_query.message.chat.id }}","text":"={{ $json.text }}","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"–¥–æ 800‚ÇΩ","additionalFields":{"callback_data":"={{ $json.reply_markup.inline_keyboard[0][0].callback_data }}"}},{"text":"–¥–æ 1000‚ÇΩ","additionalFields":{"callback_data":"={{ $json.reply_markup.inline_keyboard[0][1].callback_data }}"}}]}},{"row":{"buttons":[{"text":"={{ $json.reply_markup.inline_keyboard[1][0].text }}","additionalFields":{"callback_data":"={{ $json.reply_markup.inline_keyboard[1][0].callback_data }}"}},{"text":"=ü§ë–ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π","additionalFields":{"callback_data":"={{ $json.reply_markup.inline_keyboard[1][1].callback_data }}"}}]}}]},"additionalFields":{"appendAttribution":false}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[800,960],"id":"85df2a26-c347-487c-817b-644a9330a4ef","name":"–ö–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä –±—é–¥–∂–µ—Ç–∞","webhookId":"182771d4-324c-4a5e-9b6b-cb35d00a0a98","credentials":{"telegramApi":{"id":"iZNX6D8v0FBJG5wC","name":"/Ai_Beauty_agent_bot"}}},{"parameters":{"content":"# —Ç–∏–ø –∫–æ–∂–∏ —Å –∫–Ω–æ–ø–æ–∫ –≤—ã–±–æ—Ä–∞","height":360,"width":960,"color":3},"type":"n8n-nodes-base.stickyNote","position":[60,860],"typeVersion":1,"id":"a1c06031-4c24-4579-86cb-80016d28703c","name":"Sticky Note","disabled":true},{"parameters":{"promptType":"define","text":"={{ $json.chat_id }} {{ $json.budget }} {{ $json.skin_type }}","options":{"systemMessage":"=You are an expert cosmetologist in the field of facial skin care cosmetics.\n\nYour goal is to choose the best facial tonic that suits the client's skin type and specified budget.\n\nYou are given access to a Google spreadsheet with a database of products. The columns contain:\n\n- Product Name  \n- Product Name 2  \n- description  \n- Rating  \n- price  \n- sale  \n- Skin type  \n- Link  \n\n---\n\nWhen the user specifies their skin type and budget:\n\n1. Find the products for which the specified value is indicated in the \"Skin type\" column (for example, \"oily\", \"normal\", \"combination\", \"dry\").\n2. Filter them by price ‚Äî only those that correspond from 75% to 100% of the budget.\n3. Among the search results, select one product with the most attractive or relevant description and composition suitable for the skin type specified by the user.\n4. If several options are equally good, choose the one that is more expensive.\n5. Take the product link from the \"Link\" column, for example: ( https://goldapple.ru/19000237261-heartleaf-77 ) and give it out along with the goods as written below.\n\n---\n\nSelect the product according to the skin type in the table.  \nIf the product is suitable for all skin types, then check the composition in the table and choose the optimal one for this skin type.  \nTake 500 characters from the description. If necessary, shorten it manually.\n\n---\n\nRules:\n- Use only the data from the spreadsheet.\n- Do not create or invent any products.\n- Specify only one product in the final message.\n- If no suitable product is found, please kindly inform us in Russian.\n\n---\n\n The response format is in Russian (only the data from the table).:\n\n Here's what I've selected from the best facial care products suitable for your skin type and budget.:*  \n\n *Brand:* Product name\n,*Name:* Product Name 2  \nDescription (up to 500 characters) \n Train safety: %\n*Rating:* ASSESSMENT  \nüí∏ *Price:* XX‚ÇΩ  \n‚ú® *DISCOUNT:* %\ngo to the product\nhttps://goldapple.ru/19000237261-heartleaf-77\n\n---\n\nIf you haven't eaten the right product, write *Unfortunately, I haven't found the right toners for your skin type and budget. Try to change the settings or ask another question.*\n\n---\n\nAlways answer in **Russian**.  \nUse the Markdown format."}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2,"position":[740,2560],"id":"aafd01c5-a5ce-486c-99eb-234b7350fc72","name":"Search Agent","retryOnFail":true,"onError":"continueErrorOutput"},{"parameters":{"content":"## –†–ï–ó–£–õ–¨–¢–ê–¢","height":600,"width":3100},"type":"n8n-nodes-base.stickyNote","position":[-380,2480],"typeVersion":1,"id":"b172ba9f-6e19-4321-a06f-5e21e7ad53bd","name":"Sticky Note1"},{"parameters":{"mode":"runOnceForEachItem","jsCode":"const data = $input.item.json;\n\n// –ò–∑–≤–ª–µ–∫–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä\nconst chatId = data.result?.chat?.id || 0;\nconst messageId = data.result?.message_id || 0;\nconst typeSkin = data.skin_type || \"–∂–∏—Ä–Ω–∞—è\";\nconst budget = data.budget || \"–Ω–µ —É–∫–∞–∑–∞–Ω\";\nconst raw = data.Recomendation || \"\";\n\n// –ò—â–µ–º –ø–µ—Ä–≤—É—é markdown-—Å—Å—ã–ª–∫—É\nconst linkMatch = raw.match(/\\[.*?\\]\\((.*?)\\)/);\nconst link = linkMatch ? linkMatch[1] : \"\";\n\n// –£–¥–∞–ª—è–µ–º markdown, –Ω–æ –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç\nlet cleanText = raw.replace(/\\[([^\\]]+)\\]\\((.*?)\\)/g, '$1').trim();\n\n// –î–µ–ª–∞–µ–º –ø–µ—Ä–≤—É—é —Å—Ç—Ä–æ–∫—É –∂–∏—Ä–Ω–æ–π (–¥–æ –ø–µ—Ä–≤–æ–≥–æ –ø–µ—Ä–µ–Ω–æ—Å–∞ —Å—Ç—Ä–æ–∫–∏)\ncleanText = cleanText.replace(/^(.+?)\\n/, '**$1**\\n');\n\n// –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ\nlet text = cleanText.substring(0, 500);\n\nif (link) {\n  text += `\\n\\nüîó [–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ç–æ–≤–∞—Ä—É](${link})`;\n}\n\ntext += `\\n\\nüí¨ –•–æ—á–µ—à—å –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —É—Ö–æ–¥–∞, —Å–∫–∏–¥–∫–∏  –∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏?`;\n\nreturn {\n  json: {\n    chat_id: chatId,\n    message_id: messageId,\n    type_skin: typeSkin,\n    text: text.substring(0, 4000),\n    parse_mode: \"Markdown\",\n    disable_web_page_preview: false,\n    reply_markup: {\n      inline_keyboard: [\n        [{ text: \"üíñ –ü–æ–ª—É—á–∏—Ç—å –≤–µ—Å—å —Å–ø–∏—Å–æ–∫\", callback_data: \"pay_sub\" }],\n        [{ text: \"üîÅ –•–æ—á—É –ø–æ–∑–∂–µ\", callback_data: \"later\" }]\n      ]\n    }\n  }\n};\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1900,2540],"id":"784360d3-669a-4950-b287-c2ea878fe674","name":"Code3"},{"parameters":{"mode":"runOnceForEachItem","jsCode":"const chatId = $json.callback_query?.from?.id || 0;\n\nconst text = \n`‚ú® *–¢–´ - –ù–ê –®–ê–ì –ë–õ–ò–ñ–ï –ö –ö–û–ñ–ï –ú–ï–ß–¢–´*\n\n–•–≤–∞—Ç–∏—Ç —Ç—Ä–∞—Ç–∏—Ç—å —á–∞—Å—ã –Ω–∞ –æ–±–∑–æ—Ä—ã, –¥–µ–Ω—å–≥–∏ –Ω–∞ ¬´–≤–¥—Ä—É–≥ –ø–æ–¥–æ–π–¥—ë—Ç¬ª –∏ —Å–∏–ª—ã –Ω–∞ –¥–æ–≥–∞–¥–∫–∏.  \n–° _AI-–∫–æ—Å–º–µ—Ç–æ–ª–æ–≥–æ–º_ —Ç—ã —ç–∫–æ–Ω–æ–º–∏—à—å *–≤—Ä–µ–º—è* –∏ *–±—é–¥–∂–µ—Ç* ‚Äî –∏ —Ç–æ—á–Ω–æ –ø–æ–¥–±–µ—Ä—ë—à—å, —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç *–∏–º–µ–Ω–Ω–æ –¥–ª—è —Ç–µ–±—è* üíñ\n\nüéÅ *–ß—Ç–æ —Ç—ã –ø–æ–ª—É—á–∞–µ—à—å —Å –ø–æ–¥–ø–∏—Å–∫–æ–π:*\n\nüíÑ *6-8 —É—Ö–æ–¥–æ–≤—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤* - –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ –ø–æ–¥–æ–±—Ä–∞–Ω–Ω—ã—Ö –ø–æ–¥ —Ç–≤–æ–π —Ç–∏–ø –∫–æ–∂–∏ –∏ –±—é–¥–∂–µ—Ç  \nüõçÔ∏è *–°—Å—ã–ª–∫–∏ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã* - –±–µ—Ä–∏ –∏ –∑–∞–∫–∞–∑—ã–≤–∞–π  \nüî• *–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ —Å–∫–∏–¥–∫–∏ –∏ –∞–∫—Ü–∏–∏*  \nüÜï *–¢–æ–ª—å–∫–æ –Ω–æ–≤–∏–Ω–∫–∏ –∏ —Ç—Ä–µ–Ω–¥—ã*  \nü§ñ *–ü–æ–¥–¥–µ—Ä–∂–∫–∞ AI-–∫–æ—Å–º–µ—Ç–æ–ª–æ–≥–∞ 24/7* - –∑–∞–¥–∞–≤–∞–π –ª—é–±—ã–µ –≤–æ–ø—Ä–æ—Å—ã  \nüßñ‚Äç‚ôÄÔ∏è *–ü–ª–∞–Ω —É—Ö–æ–¥–∞ –±–µ–∑ –ø—É—Ç–∞–Ω–∏—Ü—ã –∏ –ø–µ—Ä–µ–≥—Ä—É–∑–∞*  \nüéâ *–î–æ—Å—Ç—É–ø –≤ –∑–∞–∫—Ä—ã—Ç—ã–π –∫–∞–Ω–∞–ª* ‚Äî —Å —Ä–æ–∑—ã–≥—Ä—ã—à–∞–º–∏, –∫–æ–Ω–∫—É—Ä—Å–∞–º–∏ –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–º–∏ –∞–∫—Ü–∏—è–º–∏  \nüíØ *–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —Å–∫–∞–Ω–µ—Ä –º–∏–∫—Ä–æ–±–∏–æ–º–∞ –∫–æ–∂–∏ –¥–ª—è –≥–ª—É–±–æ–∫–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ + –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–∂–∏*  \n\n‚ú® *–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Å—è –∫ ¬´Beauty Club K.Loo¬ª - –∫—Ä–∞—Å–æ—Ç–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–¥–æ–±—Ä–∞–Ω–Ω–æ–≥–æ —É—Ö–æ–¥–∞!*  \n\nüëâ –ì–æ—Ç–æ–≤–∞ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å? –ü—Ä–æ—Å—Ç–æ –Ω–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É - –∏ –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ —Å–¥–µ–ª–∞–µ—Ç _AI-–∫–æ—Å–º–µ—Ç–æ–ª–æ–≥_.`;\n\nreturn {\n  json: {\n    chat_id: chatId,\n    text,\n    parse_mode: \"MarkdownV2\",\n    disable_web_page_preview: true,\n    reply_markup: {\n      inline_keyboard: [\n        [\n          { text: \"‚úÖ –ì–æ—Ç–æ–≤–∞\", callback_data: \"ready_for_offer\" }\n        ],\n        [\n          { text: \"üö´ –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä\", callback_data: \"stop_conversation\" }\n        ]\n      ]\n    }\n  }\n};\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-1520,2160],"id":"2403683d-7658-4b88-ae67-0ffee91a3c71","name":"Code4"},{"parameters":{"content":"## –†–ê–°–ü–û–ó–ù–ê–ù–ò–ï –¢–ò–ü–ê –ö–û–ñ–ò –ü–û –§–û–¢–û","height":580,"width":2420,"color":7},"type":"n8n-nodes-base.stickyNote","position":[40,180],"typeVersion":1,"id":"9ca9ef94-6fdb-4171-932a-56640acc8901","name":"Sticky Note2"},{"parameters":{"content":"## –ü–†–ï–î–õ–û–ñ–ï–ù–ò–ï –ù–ê –ü–û–î–ü–ò–°–ö–£","height":360,"width":920,"color":5},"type":"n8n-nodes-base.stickyNote","position":[-1720,2020],"typeVersion":1,"id":"c66775e7-dc8c-4fb8-848a-1eb72827d689","name":"Sticky Note3"},{"parameters":{"content":"## –í–í–ï–î–ï–ù–ò–ï –¢–ò–ü–ê –ö–û–ñ–ò –í –†–£–ß–ù–£–Æ","height":320,"width":1100,"color":3},"type":"n8n-nodes-base.stickyNote","position":[60,1660],"typeVersion":1,"id":"2b33adb7-c12f-4162-9b5c-5835b0b42319","name":"Sticky Note4"},{"parameters":{"mode":"runOnceForEachItem","jsCode":"const chatId = $json.callback_query?.from?.id || $json.message?.chat?.id || 0;\n\nconst text = \n`üí´ *–í—ã–±–µ—Ä–∏ —Å–≤–æ—é –ø–æ–¥–ø–∏—Å–∫—É –∏ –Ω–∞—á–Ω–∏ —É–º–Ω—ã–π —É—Ö–æ–¥ —É–∂–µ —Å–µ–≥–æ–¥–Ω—è:*\n\nüíó *1. –°—Ç–∞—Ä—Ç ‚Äî 1 –º–µ—Å—è—Ü*  \n–ü–æ–¥—Ö–æ–¥–∏—Ç, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∏ –æ—Ü–µ–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç.  \n_–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —É–∂–µ —Å –ø–µ—Ä–≤–æ–π –º–∏–Ω—É—Ç—ã._\n\nüí™ *2. –£–≤–µ—Ä–µ–Ω–Ω—ã–π —Å—Ç–∞—Ä—Ç ‚Äî 2 –º–µ—Å—è—Ü–∞ –ø–æ —Å—É–ø–µ—Ä —Ü–µ–Ω–µüéÅ*  \n–ò–¥–µ–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –≥–æ—Ç–æ–≤–∞ –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π —É—Ö–æ–¥.  \n_–ü–æ–ª—É—á–∞–µ—à—å –±–æ–ª—å—à–µ, –ø–ª–∞—Ç–∏—à—å –º–µ–Ω—å—à–µ._\n\nüëë *3. Beauty PRO ‚Äî 1 –≥–æ–¥*  \n–î–ª—è —Ç–µ—Ö, –∫—Ç–æ —Ö–æ—á–µ—Ç –≤–∑—è—Ç—å —É—Ö–æ–¥ –ø–æ–¥ –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –∏ —Å—ç–∫–æ–Ω–æ–º–∏—Ç—å.  \n_–°–∞–º–∞—è –≤—ã–≥–æ–¥–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞: –ø–ª–∞—Ç–∏—à—å —Ä–∞–∑ –≤ –≥–æ–¥ ‚Äî –∑–∞–±–æ—Ç–∏—à—å—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å._\n\nüí¨ *–í—ã–±–∏—Ä–∞–π —Ñ–æ—Ä–º–∞—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ç–µ–±–µ –ø–æ–¥—Ö–æ–¥–∏—Ç* ‚Äì –∏ —É–∂–µ —Å–µ–≥–æ–¥–Ω—è AI-–∫–æ—Å–º–µ—Ç–æ–ª–æ–≥ –ø–æ–¥–±–µ—Ä—ë—Ç –¥–ª—è —Ç–µ–±—è –ø–æ–ª–Ω—ã–π —É—Ö–æ–¥ üìú —Å —É—á—ë—Ç–æ–º –±—é–¥–∂–µ—Ç–∞üí∏ –∏ —Ü–µ–ª–µ–π.  \n\nü´∂ *–ß–µ–º —Ä–∞–Ω—å—à–µ –Ω–∞—á–Ω—ë—à—å ‚Äì —Ç–µ–º –±—ã—Å—Ç—Ä–µ–µ —É–≤–∏–¥–∏—à—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç!* ‚¨áÔ∏è`;\n\nreturn {\n  json: {\n    chat_id: chatId,\n    text,\n    parse_mode: \"Markdown\",\n    disable_web_page_preview: true,\n    reply_markup: {\n      inline_keyboard: [\n        [\n          { text: \"üíó 199‚ÇΩ ‚Äî 1 –º–µ—Å—è—Ü\", callback_data: \"sub_month\" },\n          { text: \"üí™ 299‚ÇΩ ‚Äî 2 –º–µ—Å—è—Ü–∞\", callback_data: \"sub_2months\" }\n        ],\n        [\n          { text: \"üëë 1599‚ÇΩ ‚Äî –ì–æ–¥\", callback_data: \"sub_year\" },\n          { text: \"‚ùå –ó–∞–≤–µ—Ä—à–∏—Ç—å\", callback_data: \"sub_cancel\" }\n        ]\n      ]\n    }\n  }\n};\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-1000,2600],"id":"854fd323-a24a-4ea8-b5e9-92ec8906892b","name":"Code","disabled":true},{"parameters":{"content":"## –í–´–ë–û–† –ü–û–î–ü–ò–°–ö–ò ","height":360,"width":660,"color":5},"type":"n8n-nodes-base.stickyNote","position":[-1900,2460],"typeVersion":1,"id":"dcf3ad08-3740-48db-a567-9161e1fb4180","name":"Sticky Note5"},{"parameters":{"jsCode":"const text = $json.message.text || '';\nconst skinType = text.replace(/^\\/v\\s+/i, '').trim(); // –£–¥–∞–ª—è–µ—Ç \"/v\" –∏ –ø—Ä–æ–±–µ–ª—ã\n\nreturn [\n  {\n    json: {\n      chat_id: $json.message.chat.id,\n      skin_type: skinType,\n      raw: text\n    }\n  }\n];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[200,1780],"id":"601eba76-8b06-4862-980b-07a36938c5c0","name":"extract","alwaysOutputData":true},{"parameters":{"chatId":"={{ $json.chat_id }}","text":"={{ $json.text }}","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"–¥–æ 800‚ÇΩ","additionalFields":{"callback_data":"={{ $json.reply_markup.inline_keyboard[0][0].callback_data }}"}},{"text":"–¥–æ 1000‚ÇΩ","additionalFields":{"callback_data":"={{ $json.reply_markup.inline_keyboard[0][1].callback_data }}"}}]}},{"row":{"buttons":[{"text":"={{ $json.reply_markup.inline_keyboard[1][0].text }}","additionalFields":{"callback_data":"={{ $json.reply_markup.inline_keyboard[1][0].callback_data }}"}},{"text":"=ü§ë–ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π","additionalFields":{"callback_data":"={{ $json.reply_markup.inline_keyboard[1][1].callback_data }}"}}]}}]},"additionalFields":{"appendAttribution":false}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[900,1780],"id":"66efab6c-7315-4695-89b0-c188eed9fdfc","name":"–ö–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä –±—é–¥–∂–µ—Ç–∞1","webhookId":"182771d4-324c-4a5e-9b6b-cb35d00a0a98","executeOnce":true,"credentials":{"telegramApi":{"id":"iZNX6D8v0FBJG5wC","name":"/Ai_Beauty_agent_bot"}}},{"parameters":{"jsCode":"// –ü–æ–ª—É—á–∞–µ–º –ø–µ—Ä–≤—É—é –∑–∞–ø–∏—Å—å –∏–∑ Google Sheets1\nconst sheetData = $items(\"Append or update row in sheet3\")[0].json;\n\n// –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–∏–ø –∫–æ–∂–∏, –µ—Å–ª–∏ –µ—Å—Ç—å, –∏–Ω–∞—á–µ —Å—Ç–∞–≤–∏–º \"–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π\"\nconst skinType = sheetData[\"skin_type\"]?.trim() || \"–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π\";\n\n// –ü–æ–ª—É—á–∞–µ–º chat_id –∏ message_id\nconst chatId = sheetData[\"chat_id\"];\n\n// –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–∞–º–∏ –≤—ã–±–æ—Ä–∞ –±—é–¥–∂–µ—Ç–∞\nreturn {\n  json: {\n    step: \"ask_budget\",\n    chat_id: chatId,\n    type_skin: skinType,\n    text: `üí∞–ö–∞–∫–æ–π —É —Ç–µ–±—è –±—é–¥–∂–µ—Ç –Ω–∞ —É—Ö–æ–¥–æ–≤—ã–π —Ç–æ–≤–∞—Ä –¥–ª—è —Ç–∏–ø–∞ –∫–æ–∂–∏ *${skinType}*?`,\n    reply_markup: {\n      inline_keyboard: [\n        [\n          { text: \"–¥–æ 800‚ÇΩ\", callback_data: \"budget_800\" },\n          { text: \"–¥–æ 1000‚ÇΩ\", callback_data: \"budget_1000\" }\n        ],\n        [\n          { text: \"–¥–æ 2000‚ÇΩ\", callback_data: \"budget_2000\" },\n          { text: \"–ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π\", callback_data: \"budget_unlimited\" }\n        ]\n      ]\n    }\n  }\n};\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[680,1780],"id":"daa979fe-e00e-4578-b277-d9eb5b91bbf7","name":"–ë—é–¥–∂–µ—Ç1"},{"parameters":{"operation":"sendPhoto","chatId":"={{ $json.chat_id }}","file":"https://i.postimg.cc/RFprRLhq/image.jpg","additionalFields":{"caption":"=*–ü—Ä–∏–≤–µ—Ç, {{ $json.user_name }}!* üëã  \n\n–Ø - *–ö–∞—Ä–∏–Ω–∞ (K.Loo)*, —Ç–≤–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –±—å—é—Ç–∏-–≥–∏–¥ –∏ —Å–æ–∑–¥–∞—Ç–µ–ª—å AI-–∫–æ—Å–º–µ—Ç–æ–ª–æ–≥–∞ üíÑü§ñ  \n–í–º–µ—Å—Ç–µ –º—ã —Å–¥–µ–ª–∞–µ–º —É—Ö–æ–¥ –∑–∞ –∫–æ–∂–µ–π —É–º–Ω—ã–º, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º –∏ —Ç–æ—á–Ω–æ –ø–æ–¥ —Ç–µ–±—è.\n\nüì∑ _AI-–∫–æ—Å–º–µ—Ç–æ–ª–æ–≥_ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–≤–æ—é –∫–æ–∂—É –ø–æ `—Ñ–æ—Ç–æ`:  \n–æ–ø—Ä–µ–¥–µ–ª–∏—Ç —Ç–∏–ø, –ø–æ–¥–±–µ—Ä—ë—Ç —É—Ö–æ–¥, –∏ –≤—Å—ë —ç—Ç–æ - –±–µ–∑ —Ä–µ–∫–ª–∞–º—ã –∏ –Ω–∞–≤—è–∑–∞–Ω–Ω—ã—Ö –±—Ä–µ–Ω–¥–æ–≤. –¢–æ–ª—å–∫–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.\n\n‚ú® –ê –µ—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —Ç–æ—á–Ω–æ—Å—Ç—å - –ø—Ä–æ–π–¥–∏ `Smart Skin` - –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É:  \n–° –ø–æ–º–æ—â—å—é –º–æ–µ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø—Ä–∏–±–æ—Ä–∞ —Ç—ã –ø–æ–ª—É—á–∏—à—å 100% —Ç–æ—á–Ω—ã–π –∞–Ω–∞–ª–∏–∑ - –ø–æ —É–≤–ª–∞–∂–Ω–µ–Ω–∏—é, –∂–∏—Ä–Ω–æ—Å—Ç–∏ –∏ —ç–ª–∞—Å—Ç–∏—á–Ω–æ—Å—Ç–∏ –∫–æ–∂–∏ –∏ –≤–æ–∑—Ä–∞—Å—Ç—É –∫–æ–∂–∏.  \n–¢—ã –±—É–¥–µ—à—å –≤–∏–¥–µ—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å, —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –ø–æ–ª—É—á–∞—Ç—å –ø–æ–¥–±–æ—Ä–∫—É —Å—Ä–µ–¥—Å—Ç–≤ –ø–æ–¥ –∫–∞–∂–¥–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ.\n\nüß† –í—Å–µ –ø–æ–¥–±–æ—Ä—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è - –º–æ–∂–µ—à—å –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –∏ –∑–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã _AI-–∫–æ—Å–º–µ—Ç–æ–ª–æ—É–≥_ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è.\n\nüîπ *–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å–µ–π—á–∞—Å:*  \n1. ‚úÖ –ü–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ –º–æ–π –∫–∞–Ω–∞–ª @beauty_s_karinoy - —ç—Ç–æ *–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —É—Å–ª–æ–≤–∏–µ* –¥–ª—è –Ω–∞—á–∞–ª–∞.  \n2. üì∏ –û—Ç–ø—Ä–∞–≤—å —Ñ–æ—Ç–æ –±–µ–∑ –º–∞–∫–∏—è–∂–∞ (–≤ —Å–∂–∞—Ç–æ–º –≤–∏–¥–µ).  \n3. –ò–ª–∏ –Ω–∞–ø–∏—à–∏ –≤—Ä—É—á–Ω—É—é, –Ω–∞–ø—Ä–∏–º–µ—Ä:  \n/v _—Å—É—Ö–∞—è_ \n\n*–ì–æ—Ç–æ–≤–∞? –¢–æ–≥–¥–∞ –ø–æ–µ—Ö–∞–ª–∏!* üëá\n","parse_mode":"Markdown"}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[1080,-880],"id":"bfd58daf-d4da-40c5-a22f-5c6e09c57f92","name":"start","webhookId":"da4a8d3c-0d67-480c-a25d-4844309807d2","executeOnce":true,"credentials":{"telegramApi":{"id":"iZNX6D8v0FBJG5wC","name":"/Ai_Beauty_agent_bot"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"dbd664b4-20b3-4d51-8000-20892b93782d","leftValue":"={{ Object.keys($items(\"GET profile\")[0].json || {}).length }}","rightValue":0,"operator":{"type":"number","operation":"equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[580,-920],"id":"0c721b9f-38ad-4a61-9816-0a730c7747f0","name":"IF NO"},{"parameters":{"operation":"appendOrUpdate","documentId":{"__rl":true,"value":"1zeaY92vztlwUPhv1-omWhA9y3vq6hTpXRBHL93_i_04","mode":"list","cachedResultName":"Ai K.Loo Beauty2","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1zeaY92vztlwUPhv1-omWhA9y3vq6hTpXRBHL93_i_04/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Ai K.Loo Beauty","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1zeaY92vztlwUPhv1-omWhA9y3vq6hTpXRBHL93_i_04/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"chat_id":"={{ $json.message.chat.id }}","user_name":"={{ $json.message.chat.username }}","message_id":"={{ $json.message.message_id }}"},"matchingColumns":["chat_id"],"schema":[{"id":"user_name","displayName":"user_name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"message_id","displayName":"message_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"chat_id","displayName":"chat_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"skin_type","displayName":"skin_type","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"budget","displayName":"budget","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Recomendation","displayName":"Recomendation","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Photo","displayName":"Photo","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.6,"position":[380,-920],"id":"9120d7ae-7ce1-4a8f-a131-961147ba07db","name":"GET profile","alwaysOutputData":true,"credentials":{"googleSheetsOAuth2Api":{"id":"6vdQC6SPbqTKJEsT","name":"Google Sheets account"}}},{"parameters":{"operation":"appendOrUpdate","documentId":{"__rl":true,"value":"1zeaY92vztlwUPhv1-omWhA9y3vq6hTpXRBHL93_i_04","mode":"list","cachedResultName":"Ai K.Loo Beauty2","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1zeaY92vztlwUPhv1-omWhA9y3vq6hTpXRBHL93_i_04/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Ai K.Loo Beauty","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1zeaY92vztlwUPhv1-omWhA9y3vq6hTpXRBHL93_i_04/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"chat_id":"{{ Object.keys($items(\"GET profile\")[0].json || {}).length }}","user_name":"{{ $json.message.chat.username }}","message_id":"{{ $json.message.message_id }}"},"matchingColumns":["chat_id"],"schema":[{"id":"user_name","displayName":"user_name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"message_id","displayName":"message_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"chat_id","displayName":"chat_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"skin_type","displayName":"skin_type","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"budget","displayName":"budget","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Recomendation","displayName":"Recomendation","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Photo","displayName":"Photo","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.6,"position":[780,-980],"id":"23307731-a403-4c69-b2f5-3e03933d92e7","name":"–∑–∞–ø–∏—Å—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è","credentials":{"googleSheetsOAuth2Api":{"id":"6vdQC6SPbqTKJEsT","name":"Google Sheets account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"19602ee4-5a4a-4cc9-bd0e-b144c2b29d6b","leftValue":"={{ $json.result.status }}","rightValue":"member","operator":{"type":"string","operation":"equals"}},{"id":"1cfe0888-44e6-40a4-917e-fa2d3ac02443","leftValue":"={{ $json.result.status }}","rightValue":"administrator","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}},{"id":"16a6c0b3-f658-426f-99e6-facda42cc643","leftValue":"={{ $json.result.status }}","rightValue":"creator","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"or"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[440,-300],"id":"0d789d1f-d986-46d8-92c3-a541c8564517","name":"–ü–æ–¥–ø–∏—Å–∞–ª—Å—è –ª–∏ —á–µ–ª–æ–≤–µ–∫?"},{"parameters":{"chatId":"={{ $('IF NO').item.json.chat_id }}","text":"‚ú®–ï—Å–ª–∏ —Ç—ã –µ—â–µ –Ω–µ –≤ –∫–ª—É–±–µ K.Loo, —Ç–æ —Å–µ–π—á–∞—Å —Å–∞–º—Ä–µ –≤—Ä–µ–º—è –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è!  \n1.–ü–µ—Ä–µ–π–¥–∏ –ø–æ —Å—Å—ã–ª–∫–µ @beauty_s_karinoy \n2.–ù–∞–∂–º–∏ ¬´–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è¬ª –ò –≤–µ—Ä–Ω–∏—Å—å –∑–∞ –ø–æ–¥–±–æ—Ä–∫–æ–π! –ñ–¥—É —Ç–µ–±—èüíñ","additionalFields":{}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[660,-200],"id":"e44d0cda-7edb-47de-b2c7-c38536154232","name":"–ü—Ä–æ—Å–∏–º –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ –Ω–µ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ","webhookId":"69e420ef-2eb2-45c9-a990-5b0748adeeeb","executeOnce":true,"credentials":{"telegramApi":{"id":"iZNX6D8v0FBJG5wC","name":"/Ai_Beauty_agent_bot"}}},{"parameters":{"url":"https://api.telegram.org/bot7723075408:AAGmjJPE8EyK7bCN2hriXicMwa4NxpuhiDs/getChatMember","sendQuery":true,"queryParameters":{"parameters":[{"name":"chat_id","value":"@beauty_s_karinoy"},{"name":"user_id","value":"={{ $json.callback_query.message.chat.id }}"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[220,-300],"id":"528ecd21-0ded-4ba3-990f-9e2d5347f5b5","name":"–ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–ø–∏—Å–∞–ª—Å—è –ª–∏ —á–µ–ª–æ–≤–µ–∫"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"03064e87-87f6-4278-aec2-8a55e2e0407e","leftValue":"={{ $json.data.approved }}","rightValue":"","operator":{"type":"boolean","operation":"true","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[900,-200],"id":"55a214b8-2d07-416c-b1f2-89368b49cf7f","name":"–ù–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏1"},{"parameters":{"chatId":"={{ $json.result.user.id }}","text":"üíü–°—É–ø–µ—Ä! –ñ–¥—É —Ç–≤–æ—ë —Ñ–æ—Ç–æüì∑","replyMarkup":"forceReply","forceReply":{},"additionalFields":{"appendAttribution":false}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[660,-420],"id":"6590f2f5-fe9c-4ff4-9c4d-c0d6ec8c6d6c","name":"–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º","webhookId":"1881e3aa-997a-4bd3-8c67-4a331f81a917","alwaysOutputData":true,"executeOnce":true,"credentials":{"telegramApi":{"id":"iZNX6D8v0FBJG5wC","name":"/Ai_Beauty_agent_bot"}}},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"0a73cab2-d78a-4354-a626-2fa054d2426a","leftValue":"={{ $json.message.text }}","rightValue":"/start","operator":{"type":"string","operation":"startsWith"}}],"combinator":"and"},"renameOutput":true,"outputKey":"start"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"4ffe4700-9916-46a7-9c5d-416f7f56210c","leftValue":"={{ $json.data.approved }}","rightValue":"","operator":{"type":"boolean","operation":"true","singleValue":true}}],"combinator":"and"},"renameOutput":true,"outputKey":"–ø–æ–¥–ø–∏—Å–∫–∞"}]},"options":{}},"type":"n8n-nodes-base.switch","typeVersion":3.2,"position":[100,-900],"id":"3687f22c-6541-4601-a338-9425e0c3ecc6","name":"Switch1"},{"parameters":{"content":"# /start  –ò –°–û–ó–î–ê–ù–ò–ï –ü–†–û–§–ò–õ–Ø\n\n\n\n","height":372,"width":1918,"color":7},"id":"e0a6b17c-52a9-46a7-beb4-73d19abd4e58","name":"Sticky Note6","type":"n8n-nodes-base.stickyNote","position":[20,-1040],"typeVersion":1},{"parameters":{"content":"## –ø–æ–¥–ø–∏—Å–∫–∞","height":620,"width":1100},"type":"n8n-nodes-base.stickyNote","position":[40,-520],"typeVersion":1,"id":"62a8676f-2047-4fdb-b58b-350d7cf8496a","name":"Sticky Note8"},{"parameters":{"mode":"raw","jsonOutput":"={\n  \"chat_id\": \"{{ $json.result.chat.id }}\",\n  \"text\": \"‚úÖ –ü–æ–¥–ø–∏—à–∏—Å—å!\\n\\nüìå –í—Å—ë –≥–æ—Ç–æ–≤–æ –¥–ª—è –Ω–∞—á–∞–ª–∞.\\nüì∑ –ü–æ—Å–ª–µ –ø–æ–¥–ø–∏—Å–∫–∏ –≤—ã—Å—ã–ª–∞–π —Ñ–æ—Ç–æ, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å.\\nüëá –ñ–¥—É —Ç–µ–±—è –Ω–∏–∂–µ!\",\n  \"parse_mode\": \"Markdown\"\n}\n","options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[1520,-880],"id":"feb3a125-59fd-4667-8769-bb6b6698b3a1","name":"Edit Fields1"},{"parameters":{"operation":"appendOrUpdate","documentId":{"__rl":true,"value":"1zeaY92vztlwUPhv1-omWhA9y3vq6hTpXRBHL93_i_04","mode":"list","cachedResultName":"Ai K.Loo Beauty2","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1zeaY92vztlwUPhv1-omWhA9y3vq6hTpXRBHL93_i_04/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Ai K.Loo Beauty","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1zeaY92vztlwUPhv1-omWhA9y3vq6hTpXRBHL93_i_04/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"Recomendation":"={{ $json.output }}","chat_id":"={{ $('Code1').item.json.chat_id }}"},"matchingColumns":["chat_id"],"schema":[{"id":"user_name","displayName":"user_name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"message_id","displayName":"message_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"chat_id","displayName":"chat_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"skin_type","displayName":"skin_type","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"budget","displayName":"budget","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Recomendation","displayName":"Recomendation","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"Photo","displayName":"Photo","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.6,"position":[1220,2540],"id":"8b5569c9-0ac8-4340-b3f8-4c9a06798a39","name":"Append or update row in sheet2","credentials":{"googleSheetsOAuth2Api":{"id":"6vdQC6SPbqTKJEsT","name":"Google Sheets account"}}},{"parameters":{"operation":"appendOrUpdate","documentId":{"__rl":true,"value":"1Y4LNK4LOUFN5Wiz9hsTA54kzQ_dw36tSio17aOE8jNo","mode":"list","cachedResultName":"Ai K.Loo Beauty","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Y4LNK4LOUFN5Wiz9hsTA54kzQ_dw36tSio17aOE8jNo/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Ai K.Loo Beauty","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1zeaY92vztlwUPhv1-omWhA9y3vq6hTpXRBHL93_i_04/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"chat_id":"={{ $json.chat_id }}","skin_type":"={{ $json.skin_type }}"},"matchingColumns":["chat_id"],"schema":[{"id":"chat_id","displayName":"chat_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"message_id","displayName":"message_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"user_name","displayName":"user_name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"skin_type","displayName":"skin_type","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.6,"position":[440,1780],"id":"3e379ee7-e9bc-4154-b0e0-5417c6d2a0b6","name":"Append or update row in sheet3","credentials":{"googleSheetsOAuth2Api":{"id":"6vdQC6SPbqTKJEsT","name":"Google Sheets account"}}},{"parameters":{"operation":"appendOrUpdate","documentId":{"__rl":true,"value":"1zeaY92vztlwUPhv1-omWhA9y3vq6hTpXRBHL93_i_04","mode":"list","cachedResultName":"Ai K.Loo Beauty2","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1zeaY92vztlwUPhv1-omWhA9y3vq6hTpXRBHL93_i_04/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Ai K.Loo Beauty","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Y4LNK4LOUFN5Wiz9hsTA54kzQ_dw36tSio17aOE8jNo/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"chat_id":"={{ $('Telegram Trigger').item.json.message.chat.id }}","message_id":"={{ $('Telegram Trigger').item.json.message.message_id }}","user_name":"={{ $('Telegram Trigger').item.json.message.chat.username }}","skin_type":"={{ $json.choices[0].message.content }}"},"matchingColumns":["chat_id"],"schema":[{"id":"user_name","displayName":"user_name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"message_id","displayName":"message_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"chat_id","displayName":"chat_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"skin_type","displayName":"skin_type","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"budget","displayName":"budget","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Recomendation","displayName":"Recomendation","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Photo","displayName":"Photo","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.6,"position":[1180,380],"id":"2de934d4-9068-4de3-9baa-6bbc2830b832","name":"Append or update row in sheet5","credentials":{"googleSheetsOAuth2Api":{"id":"6vdQC6SPbqTKJEsT","name":"Google Sheets account"}}},{"parameters":{"attributes":{"attributes":[{}]},"options":{}},"type":"@n8n/n8n-nodes-langchain.informationExtractor","typeVersion":1.2,"position":[-2480,200],"id":"54fbf55f-8670-475a-889d-a96f909d7144","name":"Information Extractor","disabled":true},{"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4.1-mini"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[-2540,800],"id":"4317347f-f70b-46c1-aa67-904c0a74cedc","name":"OpenAI Chat Model","credentials":{"openAiApi":{"id":"pEYK630XicQCaEr8","name":"OpenAi account 2"}}},{"parameters":{"operation":"appendOrUpdate","documentId":{"__rl":true,"value":"1zeaY92vztlwUPhv1-omWhA9y3vq6hTpXRBHL93_i_04","mode":"list","cachedResultName":"Ai K.Loo Beauty2","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1zeaY92vztlwUPhv1-omWhA9y3vq6hTpXRBHL93_i_04/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Ai K.Loo Beauty","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1zeaY92vztlwUPhv1-omWhA9y3vq6hTpXRBHL93_i_04/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"skin_type":"={{ $json.skin_type }}","chat_id":"={{ $json.chat_id }}"},"matchingColumns":["chat_id"],"schema":[{"id":"user_name","displayName":"user_name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"message_id","displayName":"message_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"chat_id","displayName":"chat_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"skin_type","displayName":"skin_type","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"budget","displayName":"budget","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Recomendation","displayName":"Recomendation","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Photo","displayName":"Photo","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.6,"position":[420,960],"id":"d8175cae-90e5-4784-a974-a673bfac1f3e","name":"Append or update row in sheet6","credentials":{"googleSheetsOAuth2Api":{"id":"6vdQC6SPbqTKJEsT","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $json.chat_id }}","text":"={{ $json.Recomendation }}","additionalFields":{"appendAttribution":false,"parse_mode":"Markdown"}},"name":"–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∏—Å–∫–∞","type":"n8n-nodes-base.telegram","typeVersion":1,"position":[1460,2540],"id":"8a8bacaa-1a0a-4c21-8f99-ec75949487f6","webhookId":"1aa4a16e-2b28-417a-be38-5b785433341e","executeOnce":true,"credentials":{"telegramApi":{"id":"iZNX6D8v0FBJG5wC","name":"/Ai_Beauty_agent_bot"}}},{"parameters":{"chatId":"={{ $json.chat_id }}","text":"={{ $json.text }}","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"‚úÖ –ì–æ—Ç–æ–≤–∞","additionalFields":{"callback_data":"={{ $json.reply_markup.inline_keyboard[0][0].callback_data }}"}},{"text":"üö´ –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä","additionalFields":{"callback_data":"={{ $json.reply_markup.inline_keyboard[1][0].callback_data }}"}}]}}]},"additionalFields":{"appendAttribution":false}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[-1280,2160],"id":"117b8217-cd14-45b1-a0da-f546f95da1d2","name":"–ü—Ä–µ–¥–ª–æ–¥–∂–µ–Ω–∏–µ –Ω–∞ –ø–æ–¥–ø–∏—Å–∫—É","webhookId":"7b6e7ef6-f7ee-4106-955f-6aadae8e0781","executeOnce":true,"credentials":{"telegramApi":{"id":"iZNX6D8v0FBJG5wC","name":"/Ai_Beauty_agent_bot"}}},{"parameters":{"chatId":"={{ $json.chat_id }}","text":"={{ $json.text }}","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":" 199‚ÇΩ - 1 –º–µ—Å—è—Ü","additionalFields":{"callback_data":"={{ $json.reply_markup.inline_keyboard[0][0].callback_data }}"}}]}},{"row":{"buttons":[{"text":"={{ $json.reply_markup.inline_keyboard[0][1].text }}","additionalFields":{"callback_data":"={{ $json.reply_markup.inline_keyboard[0][1].callback_data }}"}}]}},{"row":{"buttons":[{"text":"={{ $json.reply_markup.inline_keyboard[1][0].text }}","additionalFields":{"callback_data":"={{ $json.reply_markup.inline_keyboard[1][0].callback_data }}"}}]}},{"row":{"buttons":[{"text":"={{ $json.reply_markup.inline_keyboard[1][1].text }}","additionalFields":{"callback_data":"={{ $json.reply_markup.inline_keyboard[1][1].callback_data }}"}}]}},{"row":{"buttons":[{"text":"‚ùå –ó–∞–≤–µ—Ä—à–∏—Ç—å","additionalFields":{"callback_data":"={{ $json.reply_markup.inline_keyboard[2][0].callback_data }}"}}]}}]},"additionalFields":{"appendAttribution":false}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[-1520,2580],"id":"e60ca2ec-f6e3-44ba-bd9d-4cdf811cd66d","name":"–í—ã–±–æ—Ä –ø–æ–¥–ø–∏—Å–∫–∏","webhookId":"7b6e7ef6-f7ee-4106-955f-6aadae8e0781","executeOnce":true,"credentials":{"telegramApi":{"id":"iZNX6D8v0FBJG5wC","name":"/Ai_Beauty_agent_bot"}}},{"parameters":{"amount":10},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[1320,-880],"id":"7ebf2cab-c239-4c81-94ad-c09133b8fa5c","name":"Wait","webhookId":"01a3f518-2aa1-4cfc-a7f9-94733e33799a"},{"parameters":{"mode":"runOnceForEachItem","jsCode":"const chatId = $json.callback_query?.from?.id || $json.message?.chat?.id || 0;\n\nconst text = \n`‚ú® *–ì–æ—Ç–æ–≤–∞ –Ω–∞—á–∞—Ç—å —É–º–Ω—ã–π —É—Ö–æ–¥ –∑–∞ –∫–æ–∂–µ–π?*  \n–í—ã–±–∏—Ä–∞–π –ø–æ–¥–ø–∏—Å–∫—É –∏ –ø–æ–ª—É—á–∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É _AI-–∫–æ—Å–º–µ—Ç–æ–ª–æ–≥–∞_ —É–∂–µ —Å–µ–≥–æ–¥–Ω—è! üíÑüí¨\n\nüíó *1. START - 1 –º–µ—Å—è—Ü*  \n–•–æ—á–µ—à—å –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∏ —É–≤–∏–¥–µ—Ç—å —ç—Ñ—Ñ–µ–∫—Ç? –≠—Ç–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è —Ç–µ–±—è!  \n–ß—Ç–æ —Ç—ã –ø–æ–ª—É—á–∞–µ—à—å:\nüîπ–ü–æ–ª–Ω—ã–π –ø–æ–¥–±–æ—Ä —É—Ö–æ–¥–æ–≤—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤,  –ø–æ –æ—Ü–µ–Ω–∫–µ –∫–æ–∂–∏ –ø–æ —Ñ–æ—Ç–æ\nüîπ–°—Å—ã–ª–∫–∏ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã - –±–µ—Ä–∏ –∏ –∑–∞–∫–∞–∑—ã–≤–∞–π \nüîπ–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ —Å–∫–∏–¥–∫–∏ –∏ –∞–∫—Ü–∏–∏  \nüîπ–¢–æ–ª—å–∫–æ –Ω–æ–≤–∏–Ω–∫–∏ –∏ —Ç—Ä–µ–Ω–¥—ã  \nüîπ–ü–æ–¥–¥–µ—Ä–∂–∫–∞ AI-–∫–æ—Å–º–µ—Ç–æ–ª–æ–≥–∞ 24/7 - –∑–∞–¥–∞–≤–∞–π –ª—é–±—ã–µ –≤–æ–ø—Ä–æ—Å—ã\nüîπ–ü–ª–∞–Ω —É—Ö–æ–¥–∞ –±–µ–∑ –ø—É—Ç–∞–Ω–∏—Ü—ã –∏ –ø–µ—Ä–µ–≥—Ä—É–∑–∞  \nüîπ–î–æ—Å—Ç—É–ø –∫ *–∑–∞–∫—Ä—ã—Ç–æ–º—É –∫–∞–Ω–∞–ª—É* ‚Äî —Ä–æ–∑—ã–≥—Ä—ã—à–∏, –ø–æ–¥–∞—Ä–∫–∏ –∏ VIP-–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è üéÅ\n\nüí™ *2. –£–≤–µ—Ä–µ–Ω–Ω—ã–π START - 2 –º–µ—Å—è—Ü–∞ –ø–æ —Å—É–ø–µ—Ä —Ü–µ–Ω–µüéÅ*  \n_–ü–æ–ª—É—á–∞–µ—à—å –ø–∞–∫–µ—Ç START –ø–æ –≤—ã–≥–æ–¥–Ω–æ–π —Ü–µ–Ω–µ_\nüí∞ –≠–∫–æ–Ω–æ–º–∏—è + —Å—Ç–∞–±–∏–ª—å–Ω—ã–π —É—Ö–æ–¥  \nüìÜ 2 –º–µ—Å—è—Ü–∞ –∑–∞–±–æ—Ç—ã –æ –∫–æ–∂–µ –±–µ–∑ –ø–∞—É–∑\n\nüëë *3. Beauty PRO - 1 –≥–æ–¥*  \n–£—Ö–æ–¥ –≤ —Ç–≤–æ–∏—Ö —Ä—É–∫–∞—Ö –Ω–∞ —Ü–µ–ª—ã–π –≥–æ–¥!\nüí∏ –û–ø–ª–∞—á–∏–≤–∞–µ—à—å –æ–¥–∏–Ω —Ä–∞–∑ ‚Äî –Ω–∞—Å–ª–∞–∂–¥–∞–µ—à—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –∫—Ä—É–≥–ª—ã–π –≥–æ–¥.  \nüîê –ë–æ–ª—å—à–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞, –±–æ–ª—å—à–µ –ø–æ–¥–∞—Ä–∫–æ–≤, –±–æ–ª—å—à–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.\n\nüíé *3. SMART skin - –ü–æ–ª—É—á–∞–µ—à—å —Å–∫–∞–Ω–µ—Ä - –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –º–∏–∫—Ä–æ–±–∏–æ–º—ã –∫–æ–∂–∏*  \n‚ö°Ô∏è –ü—Ä–µ–º–∏—É–º-—É—Ö–æ–¥ —Å –ø–µ—Ä–≤–æ–≥–æ –¥–Ω—è —Å —É–≥–ª—É–±–ª—ë–Ω–Ω—ã–º –∞–Ω–∞–ª–∏–∑–æ–º –∫–æ–∂–∏ \nüî¨ –ü–æ–ª—É—á–∏ –≤ –ø–∞–∫–µ—Ç–µ *–∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —Å–∫–∞–Ω–µ—Ä –º–∏–∫—Ä–æ–±–∏–æ–º–∞ –∫–æ–∂–∏* + –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ 1 –º–µ—Å—è—Ü  \nüìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–∂–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏\n\n\nüí¨ *–í—ã–±–∏—Ä–∞–π —Ñ–æ—Ä–º–∞—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ç–µ–±–µ –ø–æ–¥—Ö–æ–¥–∏—Ç* - –∏ —É–∂–µ —Å–µ–≥–æ–¥–Ω—è AI-–∫–æ—Å–º–µ—Ç–æ–ª–æ–≥ –ø–æ–¥–±–µ—Ä—ë—Ç –¥–ª—è —Ç–µ–±—è –ø–æ–ª–Ω—ã–π —É—Ö–æ–¥üìú —Å —É—á—ë—Ç–æ–º –±—é–¥–∂–µ—Ç–∞üí∏ –∏ —Ü–µ–ª–µ–π.  \n\nü´∂ *–ß–µ–º —Ä–∞–Ω—å—à–µ –Ω–∞—á–Ω—ë—à—å - —Ç–µ–º –±—ã—Å—Ç—Ä–µ–µ —É–≤–∏–¥–∏—à—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç!* ‚¨áÔ∏è`;\n\nreturn {\n  json: {\n    chat_id: chatId,\n    text,\n    parse_mode: \"Markdown\",\n    disable_web_page_preview: true,\n    reply_markup: {\n      inline_keyboard: [\n        [\n          { text: \" 199‚ÇΩ - 1 –º–µ—Å—è—Ü\", callback_data: \"sub_month\" },\n          { text: \" 299‚ÇΩ - 2 –º–µ—Å—è—Ü–∞\", callback_data: \"sub_2months\" }\n        ],\n        [\n          { text: \" 1599‚ÇΩ - –ì–æ–¥\", callback_data: \"sub_year\" },\n          { text: \" 4990‚ÇΩ - –°–∫–∞–Ω–µ—Ä M.S + 1 –º–µ—Å—è—Ü\", callback_data: \"sub_device_month\" }\n        ],\n        [\n          { text: \" –ó–∞–≤–µ—Ä—à–∏—Ç—å\", callback_data: \"sub_cancel\" }\n        ]\n      ]\n    }\n  }\n};"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-1780,2580],"id":"92cd7dfc-d06f-44b3-aa68-f5f9ffb9c13f","name":"–ø–æ–¥–ø–∏—Å–∫–∞ —Å –ø—Ä–∏–±–æ—Ä–æ–º"},{"parameters":{"chatId":"={{ $json.chat_id }}","text":"={{ $json.text }}","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"‚úÖ –í–µ—Ä–Ω–æ","additionalFields":{"callback_data":"={{ $json.type_skin }}"}},{"text":"=‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å","additionalFields":{"callback_data":"={{ $json.reply_markup.inline_keyboard[0][1].callback_data }}"}}]}}]},"additionalFields":{}},"id":"1cb44baa-41ac-40eb-a46e-330ec527b0de","name":"—Ç–∏–ø –∫–æ–∂–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω1","type":"n8n-nodes-base.telegram","typeVersion":1,"position":[2100,280],"webhookId":"ac7ba976-75da-4a02-abbc-7bddb7115573","executeOnce":true,"credentials":{"telegramApi":{"id":"iZNX6D8v0FBJG5wC","name":"/Ai_Beauty_agent_bot"}}},{"parameters":{"chatId":"={{ $json.chat_id }}","text":"={{ $json.text }}","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{},{"row":{"buttons":[{"text":"ü©∏–°—É—Ö–∞—è","additionalFields":{"callback_data":"={{ $json.skin_options.dry }}"}}]}},{"row":{"buttons":[{"text":"‚òØÔ∏è –ö–æ–º–±–∏","additionalFields":{"callback_data":"={{ $json.skin_options.combo }}"}}]}},{"row":{"buttons":[{"text":"üíß–ñ–∏—Ä–Ω–∞—è","additionalFields":{"callback_data":"={{ $json.skin_options.oily }}"}}]}},{"row":{"buttons":[{"text":"‚úÖ –ù–æ—Ä–º","additionalFields":{"callback_data":"={{ $json.skin_options.normal }}"}}]}}]},"additionalFields":{}},"id":"a66d0caf-c000-48e5-a86c-1e57936e422f","name":"–¢–∏–ø –∫–æ–∂–∏ –ù–ï –æ—Ç–ø—Ä–µ–¥–µ–ª–µ–Ω1","type":"n8n-nodes-base.telegram","typeVersion":1,"position":[2100,540],"webhookId":"ac7ba976-75da-4a02-abbc-7bddb7115573","executeOnce":true,"credentials":{"telegramApi":{"id":"iZNX6D8v0FBJG5wC","name":"/Ai_Beauty_agent_bot"}}},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"leftValue":"={{ $json.type_skin }}","rightValue":"=","operator":{"type":"string","operation":"notEmpty","singleValue":true},"id":"8b762386-e3e9-4395-a391-05e13b21e6b0"}],"combinator":"and"},"renameOutput":true,"outputKey":"–û–ø—Ä–µ–¥–µ–ª–µ–Ω"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"e67210d2-8ddc-4e22-bfdd-52a2753c970b","leftValue":"={{ $json.type_skin }}","rightValue":"skin_type_not_detected","operator":{"type":"string","operation":"empty","singleValue":true}}],"combinator":"and"},"renameOutput":true,"outputKey":"–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω"}]},"options":{}},"type":"n8n-nodes-base.switch","typeVersion":3.2,"position":[1680,380],"id":"377d9e49-47b5-4a65-90a1-57633068ebdd","name":"Switch6"},{"parameters":{"operation":"appendOrUpdate","documentId":{"__rl":true,"value":"1zeaY92vztlwUPhv1-omWhA9y3vq6hTpXRBHL93_i_04","mode":"list","cachedResultName":"Ai K.Loo Beauty2","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1zeaY92vztlwUPhv1-omWhA9y3vq6hTpXRBHL93_i_04/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Ai K.Loo Beauty","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1zeaY92vztlwUPhv1-omWhA9y3vq6hTpXRBHL93_i_04/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"message_id":"={{ $json.callback_query.message.message_id }}","chat_id":"={{ $json.callback_query.message.chat.id }}","user_name":"={{ $json.callback_query.message.chat.username }}","budget":"={{ $json.callback_query.data }}"},"matchingColumns":["user_name"],"schema":[{"id":"user_name","displayName":"user_name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"message_id","displayName":"message_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"chat_id","displayName":"chat_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"skin_type","displayName":"skin_type","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"budget","displayName":"budget","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Recomendation","displayName":"Recomendation","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Photo","displayName":"Photo","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.6,"position":[-220,2560],"id":"4eb7eaed-5b53-48b0-952e-a1b011c2325d","name":"–±—é–¥–∂–µ—Ç","credentials":{"googleSheetsOAuth2Api":{"id":"6vdQC6SPbqTKJEsT","name":"Google Sheets account"}}},{"parameters":{"documentId":{"__rl":true,"value":"1zeaY92vztlwUPhv1-omWhA9y3vq6hTpXRBHL93_i_04","mode":"list","cachedResultName":"Ai K.Loo Beauty2","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1zeaY92vztlwUPhv1-omWhA9y3vq6hTpXRBHL93_i_04/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Ai K.Loo Beauty","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1zeaY92vztlwUPhv1-omWhA9y3vq6hTpXRBHL93_i_04/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"chat_id","lookupValue":"={{ $json.result.chat.id }}"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.6,"position":[280,2560],"id":"fcacf1c8-5546-4b5f-8425-bf4b60f6300d","name":"–±–µ—Ä–µ—Ç –¥–∞–Ω–Ω—ã–µ –±—é–¥–∂–µ—Ç –∏ —Ç–∏–ø –∫–æ–∂–∏","credentials":{"googleSheetsOAuth2Api":{"id":"6vdQC6SPbqTKJEsT","name":"Google Sheets account"}}},{"parameters":{"chatId":"={{ $json.chat_id }}","text":"‚åõ–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ...","additionalFields":{"appendAttribution":false}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[20,2560],"id":"aa8a21d7-e0da-4a8d-a425-c6a06ad54ab1","name":"Send a text message","webhookId":"8e9b388c-75ce-421d-b710-1c1d3df1b15d","executeOnce":true,"credentials":{"telegramApi":{"id":"iZNX6D8v0FBJG5wC","name":"/Ai_Beauty_agent_bot"}}},{"parameters":{"content":"## –í–´–ë–û–†  –¢–ò–ü–ê –ö–û–ñ–ò –í –†–£–ß–ù–£–Æ","height":320,"width":1100,"color":3},"type":"n8n-nodes-base.stickyNote","position":[60,2020],"typeVersion":1,"id":"e3158547-e60b-4bf7-b0bd-259328598413","name":"Sticky Note9"},{"parameters":{"jsCode":"const skinTypeRaw = $json.callback_query?.data || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';\nconst chatId = $json.callback_query?.from?.id || 0;\n\n// –ú–∞–ø–ø–∏–Ω–≥ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ –Ω–∞ —Ä—É—Å—Å–∫–∏–π\nconst skinMap = {\n  oily: '–∂–∏—Ä–Ω–∞—è',\n  dry: '—Å—É—Ö–∞—è',\n  combo: '–∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è',\n  normal: '–Ω–æ—Ä–º–∞–ª—å–Ω–∞—è'\n};\n\n// –ò–∑–≤–ª–µ–∫–∞–µ–º –∞–Ω–≥–ª–∏–π—Å–∫–∏–π –∫–æ–¥ —Ç–∏–ø–∞ –∫–æ–∂–∏\nconst code = skinTypeRaw.replace('skin_select_', '').replace(/_1046$/, '');\nconst skinType = skinMap[code] || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';\n\nreturn [\n  {\n    json: {\n      chat_id: chatId,\n      skin_type: skinType,\n      raw: skinTypeRaw\n    }\n  }\n];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[200,2140],"id":"ade823c6-7c92-49b6-9386-65cda3f46e8b","name":"extract1","alwaysOutputData":true},{"parameters":{"chatId":"={{ $json.chat_id }}","text":"={{ $json.text }}","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"–¥–æ 800‚ÇΩ","additionalFields":{"callback_data":"={{ $json.reply_markup.inline_keyboard[0][0].callback_data }}"}},{"text":"–¥–æ 1000‚ÇΩ","additionalFields":{"callback_data":"={{ $json.reply_markup.inline_keyboard[0][1].callback_data }}"}}]}},{"row":{"buttons":[{"text":"={{ $json.reply_markup.inline_keyboard[1][0].text }}","additionalFields":{"callback_data":"={{ $json.reply_markup.inline_keyboard[1][0].callback_data }}"}},{"text":"=ü§ë–ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π","additionalFields":{"callback_data":"={{ $json.reply_markup.inline_keyboard[1][1].callback_data }}"}}]}}]},"additionalFields":{"appendAttribution":false}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[900,2140],"id":"ea78bf10-7db1-4fb6-9c5a-d5bdb3720fa8","name":"–ö–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä –±—é–¥–∂–µ—Ç–∞2","webhookId":"182771d4-324c-4a5e-9b6b-cb35d00a0a98","executeOnce":true,"credentials":{"telegramApi":{"id":"iZNX6D8v0FBJG5wC","name":"/Ai_Beauty_agent_bot"}}},{"parameters":{"jsCode":"// –ü–æ–ª—É—á–∞–µ–º –ø–µ—Ä–≤—É—é –∑–∞–ø–∏—Å—å –∏–∑ Google Sheets1\nconst sheetData = $items(\"Append or update row in sheet\")[0].json;\n\n// –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–∏–ø –∫–æ–∂–∏, –µ—Å–ª–∏ –µ—Å—Ç—å, –∏–Ω–∞—á–µ —Å—Ç–∞–≤–∏–º \"–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π\"\nconst skinType = sheetData[\"skin_type\"]?.trim() || \"–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π\";\n\n// –ü–æ–ª—É—á–∞–µ–º chat_id –∏ message_id\nconst chatId = sheetData[\"chat_id\"];\n\n// –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–∞–º–∏ –≤—ã–±–æ—Ä–∞ –±—é–¥–∂–µ—Ç–∞\nreturn {\n  json: {\n    step: \"ask_budget\",\n    chat_id: chatId,\n    type_skin: skinType,\n    text: `üí∞–ö–∞–∫–æ–π —É —Ç–µ–±—è –±—é–¥–∂–µ—Ç –Ω–∞ —É—Ö–æ–¥–æ–≤—ã–π —Ç–æ–≤–∞—Ä –¥–ª—è —Ç–∏–ø–∞ –∫–æ–∂–∏ *${skinType}*?`,\n    reply_markup: {\n      inline_keyboard: [\n        [\n          { text: \"–¥–æ 800‚ÇΩ\", callback_data: \"budget_800\" },\n          { text: \"–¥–æ 1000‚ÇΩ\", callback_data: \"budget_1000\" }\n        ],\n        [\n          { text: \"–¥–æ 2000‚ÇΩ\", callback_data: \"budget_2000\" },\n          { text: \"–ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π\", callback_data: \"budget_unlimited\" }\n        ]\n      ]\n    }\n  }\n};\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[680,2140],"id":"781baa11-c4af-4bb4-85c2-51f8a580a96b","name":"–ë—é–¥–∂–µ—Ç2"},{"parameters":{"operation":"appendOrUpdate","documentId":{"__rl":true,"value":"1Y4LNK4LOUFN5Wiz9hsTA54kzQ_dw36tSio17aOE8jNo","mode":"list","cachedResultName":"Ai K.Loo Beauty","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Y4LNK4LOUFN5Wiz9hsTA54kzQ_dw36tSio17aOE8jNo/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Ai K.Loo Beauty","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1zeaY92vztlwUPhv1-omWhA9y3vq6hTpXRBHL93_i_04/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"chat_id":"={{ $json.chat_id }}","skin_type":"={{ $json.skin_type }}"},"matchingColumns":["chat_id"],"schema":[{"id":"chat_id","displayName":"chat_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"message_id","displayName":"message_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"user_name","displayName":"user_name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"skin_type","displayName":"skin_type","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.6,"position":[440,2140],"id":"b29dfdb5-e414-4d92-ba0c-6c85be661b54","name":"Append or update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"6vdQC6SPbqTKJEsT","name":"Google Sheets account"}}},{"parameters":{"jsCode":"const rawSkin = $json.callback_query?.data || '';\n\nconst map = {\n  skin_select_dry_1068: '—Å—É—Ö–∞—è',\n  skin_select_combo_1068: '–∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è',\n  skin_select_oily_1068: '–∂–∏—Ä–Ω–∞—è',\n  skin_select_normal_1068: '–Ω–æ—Ä–º–∞–ª—å–Ω–∞—è'\n};\n\nconst translatedSkin = map[rawSkin] || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';\n\nreturn [\n  {\n    json: {\n      chat_id: $json.callback_query?.from?.id || 0,\n      skin_type: translatedSkin,\n      raw: rawSkin\n    }\n  }\n];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[200,960],"id":"f00596c3-2bd9-4830-b2a8-7dc202d13e9c","name":"–ë—é–¥–∂–µ—Ç3"},{"parameters":{"content":"## —Ç–∏–ø –∫–æ–∂–∏ —Å –∫–Ω–æ–ø–∫–∏ –≤–µ—Ä–Ω–æ","height":320,"width":1100,"color":3},"type":"n8n-nodes-base.stickyNote","position":[60,1300],"typeVersion":1,"id":"f5e6edf1-9620-4c12-9876-04415c0f8d7b","name":"Sticky Note10"},{"parameters":{"jsCode":"const rawSkin = $json.callback_query?.data || '';\n\nconst skinMap = {\n  skin_select_dry_1068: '—Å—É—Ö–∞—è',\n  skin_select_combo_1068: '–∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è',\n  skin_select_oily_1068: '–∂–∏—Ä–Ω–∞—è',\n  skin_select_normal_1068: '–Ω–æ—Ä–º–∞–ª—å–Ω–∞—è',\n  —Å—É—Ö–∞—è: '—Å—É—Ö–∞—è',\n  –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è: '–∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è',\n  –∂–∏—Ä–Ω–∞—è: '–∂–∏—Ä–Ω–∞—è',\n  –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è: '–Ω–æ—Ä–º–∞–ª—å–Ω–∞—è'\n};\n\nconst skinType = skinMap[rawSkin] || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';\n\nreturn [\n  {\n    json: {\n      skin_type: skinType\n    }\n  }\n];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[200,1420],"id":"3f638a7c-d948-42ad-876b-f4e5185b47a4","name":"extract3","alwaysOutputData":true},{"parameters":{"chatId":"={{ $json.chat_id }}","text":"={{ $json.text }}","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"–¥–æ 800‚ÇΩ","additionalFields":{"callback_data":"={{ $json.reply_markup.inline_keyboard[0][0].callback_data }}"}},{"text":"–¥–æ 1000‚ÇΩ","additionalFields":{"callback_data":"={{ $json.reply_markup.inline_keyboard[0][1].callback_data }}"}}]}},{"row":{"buttons":[{"text":"={{ $json.reply_markup.inline_keyboard[1][0].text }}","additionalFields":{"callback_data":"={{ $json.reply_markup.inline_keyboard[1][0].callback_data }}"}},{"text":"=ü§ë–ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π","additionalFields":{"callback_data":"={{ $json.reply_markup.inline_keyboard[1][1].callback_data }}"}}]}}]},"additionalFields":{"appendAttribution":false}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[900,1420],"id":"d4cff21b-a743-47e2-b25c-e0f8b76657a3","name":"–ö–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä –±—é–¥–∂–µ—Ç–∞3","webhookId":"182771d4-324c-4a5e-9b6b-cb35d00a0a98","executeOnce":true,"credentials":{"telegramApi":{"id":"iZNX6D8v0FBJG5wC","name":"/Ai_Beauty_agent_bot"}}},{"parameters":{"jsCode":"// –ü–æ–ª—É—á–∞–µ–º –ø–µ—Ä–≤—É—é –∑–∞–ø–∏—Å—å –∏–∑ Google Sheets1\nconst sheetData = $items(\"Append or update row in sheet4\")[0].json;\n\n// –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–∏–ø –∫–æ–∂–∏, –µ—Å–ª–∏ –µ—Å—Ç—å, –∏–Ω–∞—á–µ —Å—Ç–∞–≤–∏–º \"–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π\"\nconst skinType = sheetData[\"skin_type\"]?.trim() || \"–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π\";\n\n// –ü–æ–ª—É—á–∞–µ–º chat_id –∏ message_id\nconst chatId = sheetData[\"chat_id\"];\n\n// –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–∞–º–∏ –≤—ã–±–æ—Ä–∞ –±—é–¥–∂–µ—Ç–∞\nreturn {\n  json: {\n    step: \"ask_budget\",\n    chat_id: chatId,\n    type_skin: skinType,\n    text: `üí∞–ö–∞–∫–æ–π —É —Ç–µ–±—è –±—é–¥–∂–µ—Ç –Ω–∞ —É—Ö–æ–¥–æ–≤—ã–π —Ç–æ–≤–∞—Ä –¥–ª—è —Ç–∏–ø–∞ –∫–æ–∂–∏ *${skinType}*?`,\n    reply_markup: {\n      inline_keyboard: [\n        [\n          { text: \"–¥–æ 800‚ÇΩ\", callback_data: \"budget_800\" },\n          { text: \"–¥–æ 1000‚ÇΩ\", callback_data: \"budget_1000\" }\n        ],\n        [\n          { text: \"–¥–æ 2000‚ÇΩ\", callback_data: \"budget_2000\" },\n          { text: \"–ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π\", callback_data: \"budget_unlimited\" }\n        ]\n      ]\n    }\n  }\n};\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[680,1420],"id":"ea959c91-ec02-4978-8a32-d7ae84fb657e","name":"–ë—é–¥–∂–µ—Ç4"},{"parameters":{"operation":"appendOrUpdate","documentId":{"__rl":true,"value":"1Y4LNK4LOUFN5Wiz9hsTA54kzQ_dw36tSio17aOE8jNo","mode":"list","cachedResultName":"Ai K.Loo Beauty","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1Y4LNK4LOUFN5Wiz9hsTA54kzQ_dw36tSio17aOE8jNo/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Ai K.Loo Beauty","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1zeaY92vztlwUPhv1-omWhA9y3vq6hTpXRBHL93_i_04/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"chat_id":"={{ $('Telegram Trigger').item.json.callback_query.message.chat.id }}","skin_type":"={{ $json.skin_type }}"},"matchingColumns":["chat_id"],"schema":[{"id":"chat_id","displayName":"chat_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"message_id","displayName":"message_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"user_name","displayName":"user_name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"skin_type","displayName":"skin_type","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.6,"position":[440,1420],"id":"6a8d20e2-ae44-4887-b45c-5f8899bd17b2","name":"Append or update row in sheet4","credentials":{"googleSheetsOAuth2Api":{"id":"6vdQC6SPbqTKJEsT","name":"Google Sheets account"}}},{"parameters":{"jsCode":"// –ü–æ–ª—É—á–∞–µ–º –ø–µ—Ä–≤—É—é –∑–∞–ø–∏—Å—å –∏–∑ Google Sheets1\nconst sheetData = $items(\"Append or update row in sheet7\")[0].json;\n\n// –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–∏–ø –∫–æ–∂–∏, –µ—Å–ª–∏ –µ—Å—Ç—å, –∏–Ω–∞—á–µ —Å—Ç–∞–≤–∏–º \"–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π\"\nconst skinType = sheetData[\"skin_type\"]?.trim() || \"–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π\";\n\n// –ü–æ–ª—É—á–∞–µ–º chat_id –∏ message_id\nconst chatId = sheetData[\"chat_id\"];\n\n// –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–∞–º–∏ –≤—ã–±–æ—Ä–∞ –±—é–¥–∂–µ—Ç–∞\nreturn {\n  json: {\n    step: \"ask_budget\",\n    chat_id: chatId,\n    type_skin: skinType,\n    text: `üí∞–ö–∞–∫–æ–π —É —Ç–µ–±—è –±—é–¥–∂–µ—Ç –Ω–∞ —É—Ö–æ–¥–æ–≤—ã–π —Ç–æ–≤–∞—Ä –¥–ª—è —Ç–∏–ø–∞ –∫–æ–∂–∏ *${skinType}*?`,\n    reply_markup: {\n      inline_keyboard: [\n        [\n          { text: \"–¥–æ 800‚ÇΩ\", callback_data: \"budget_800\" },\n          { text: \"–¥–æ 1000‚ÇΩ\", callback_data: \"budget_1000\" }\n        ],\n        [\n          { text: \"–¥–æ 2000‚ÇΩ\", callback_data: \"budget_2000\" },\n          { text: \"–ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π\", callback_data: \"budget_unlimited\" }\n        ]\n      ]\n    }\n  }\n};\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1700,960],"id":"b2950944-d30a-4db2-b62a-d31524b89b0c","name":"–ë—é–¥–∂–µ—Ç5"},{"parameters":{"chatId":"={{ $('Telegram Trigger').item.json.callback_query.message.chat.id }}","text":"={{ $json.text }}","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"–¥–æ 800‚ÇΩ","additionalFields":{"callback_data":"={{ $json.reply_markup.inline_keyboard[0][0].callback_data }}"}},{"text":"–¥–æ 1000‚ÇΩ","additionalFields":{"callback_data":"={{ $json.reply_markup.inline_keyboard[0][1].callback_data }}"}}]}},{"row":{"buttons":[{"text":"={{ $json.reply_markup.inline_keyboard[1][0].text }}","additionalFields":{"callback_data":"={{ $json.reply_markup.inline_keyboard[1][0].callback_data }}"}},{"text":"=ü§ë–ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π","additionalFields":{"callback_data":"={{ $json.reply_markup.inline_keyboard[1][1].callback_data }}"}}]}}]},"additionalFields":{"appendAttribution":false}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[1880,960],"id":"44884c6d-6019-47db-ac4e-2e462f0eee97","name":"–ö–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä –±—é–¥–∂–µ—Ç–∞4","webhookId":"182771d4-324c-4a5e-9b6b-cb35d00a0a98","executeOnce":true,"credentials":{"telegramApi":{"id":"iZNX6D8v0FBJG5wC","name":"/Ai_Beauty_agent_bot"}}},{"parameters":{"content":"# —Ç–∏–ø –∫–æ–∂–∏ –µ—Å–ª–∏ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω","height":360,"width":960,"color":3},"type":"n8n-nodes-base.stickyNote","position":[1140,860],"typeVersion":1,"id":"578994ed-67ab-4803-a5e4-a6687a5c4a8a","name":"Sticky Note11","disabled":true},{"parameters":{"operation":"appendOrUpdate","documentId":{"__rl":true,"value":"1zeaY92vztlwUPhv1-omWhA9y3vq6hTpXRBHL93_i_04","mode":"list","cachedResultName":"Ai K.Loo Beauty2","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1zeaY92vztlwUPhv1-omWhA9y3vq6hTpXRBHL93_i_04/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Ai K.Loo Beauty","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1zeaY92vztlwUPhv1-omWhA9y3vq6hTpXRBHL93_i_04/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"skin_type":"={{ $json.skin_type }}","chat_id":"={{ $json.chat_id }}"},"matchingColumns":["chat_id"],"schema":[{"id":"user_name","displayName":"user_name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"message_id","displayName":"message_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"chat_id","displayName":"chat_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"skin_type","displayName":"skin_type","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"budget","displayName":"budget","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Recomendation","displayName":"Recomendation","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Photo","displayName":"Photo","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.6,"position":[1520,960],"id":"10a57644-0f87-4e95-8a16-ba57a3a1b0f4","name":"Append or update row in sheet7","credentials":{"googleSheetsOAuth2Api":{"id":"6vdQC6SPbqTKJEsT","name":"Google Sheets account"}}},{"parameters":{"jsCode":"const rawSkin = $json.callback_query?.data || '';\n\nconst map = {\n  skin_select_dry_1155: '—Å—É—Ö–∞—è',\n  skin_select_combo_1155: '–∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è',\n  skin_select_oily_1155: '–∂–∏—Ä–Ω–∞—è',\n  skin_select_normal_1155: '–Ω–æ—Ä–º–∞–ª—å–Ω–∞—è'\n};\n\nconst translatedSkin = map[rawSkin] || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';\n\nreturn [\n  {\n    json: {\n      chat_id: $json.callback_query?.from?.id || 0,\n      skin_type: translatedSkin,\n      raw: rawSkin\n    }\n  }\n];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1300,960],"id":"ab736de4-de37-4418-9a3e-09326e8cddbd","name":"–ë—é–¥–∂–µ—Ç6"},{"parameters":{"chatId":"={{ $json.chat_id }}","text":"–£–ø—Å... –°–∏—Å—Ç–µ–º–Ω–∞—è –æ—à–∏–±–∫–∞, –∑–∞–≥—Ä—É–∑–∏ —Ñ–æ—Ç–æ –∑–∞–Ω–æ–≥–æ ‚ò∫Ô∏è","additionalFields":{"appendAttribution":false,"disable_notification":false}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[1220,2700],"id":"322c88c5-01e0-479e-a7ed-a5dd15f40c69","name":"Send a text message2","webhookId":"f42543b8-ccba-4ae8-a2ab-086ca5fa941b","retryOnFail":false,"executeOnce":true,"credentials":{"telegramApi":{"id":"iZNX6D8v0FBJG5wC","name":"/Ai_Beauty_agent_bot"}}},{"parameters":{"jsCode":"// Node: –û—á–∏—Å—Ç–∫–∞ –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ skin_type\nconst rawSkinType = $json.skin_type;\n\ntry {\n  // –£–±–∏—Ä–∞–µ–º markdown-–±–ª–æ–∫ –∏ –ø–∞—Ä—Å–∏–º JSON\n  const cleaned = rawSkinType.replace(/```json|```/g, '').trim();\n  const parsed = JSON.parse(cleaned);\n\n  const type = parsed.candidates?.[0]?.[\"Type skin\"] || \"–Ω–æ—Ä–º–∞–ª—å–Ω–∞—è\";\n\n  return {\n    json: {\n      ...$json,\n      skin_type: type // —Ç–µ–ø–µ—Ä—å —Å—Ç—Ä–æ–∫–∞ \"–Ω–æ—Ä–º–∞–ª—å–Ω–∞—è\" –∏ —Ç.–ø.\n    }\n  };\n\n} catch (error) {\n  return {\n    json: {\n      ...$json,\n      skin_type: \"–Ω–æ—Ä–º–∞–ª—å–Ω–∞—è\",\n      error: error.message\n    }\n  };\n}\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[520,2560],"id":"67789cc5-92f3-40a1-9857-6b581c09a7ad","name":"Code1"},{"parameters":{"model":{"__rl":true,"value":"gpt-4.1-mini","mode":"list","cachedResultName":"gpt-4.1-mini"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[300,3140],"id":"b8878dc0-35b5-42c9-b420-8bc797b2d25f","name":"OpenAI Chat Model1","credentials":{"openAiApi":{"id":"pEYK630XicQCaEr8","name":"OpenAi account 2"}}},{"parameters":{"jsCode":"const names = $json.name || [];\nconst descriptions = $json.description || [];\nconst links = $json.link || [];\nconst prices = $json.price || [];\n\nlet result = '‚ú® *–í–æ—Ç —á—Ç–æ —è –ø–æ–¥–æ–±—Ä–∞–ª–∞ –∏–∑ –ª—É—á—à–∏—Ö —Å—Ä–µ–¥—Å—Ç–≤ –ø–æ —É—Ö–æ–¥—É –∑–∞ –ª–∏—Ü–æ–º, –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –¥–ª—è –≤–∞—à–µ–≥–æ —Ç–∏–ø–∞ –∫–æ–∂–∏ –∏ –±—é–¥–∂–µ—Ç–∞:*\\n\\n';\n\nfor (let i = 0; i < names.length; i++) {\n  const name1 = names[i] || '‚Äî';\n  const name2 = names[i + 1] || '‚Äî'; // –î–æ–ø. –Ω–∞–∑–≤–∞–Ω–∏–µ\n  const description = descriptions[i] || '‚Äî';\n  const link = links[i] || '‚Äî';\n  const price = prices[i] || '‚Äî';\n\n  result += `üñº *Photo*\\n\\n`; // –ü–æ–∫–∞ –±–µ–∑ —Ñ–æ—Ç–æ ‚Äî —Ç–µ–∫—Å—Ç–æ–≤–∞—è –∑–∞–≥–ª—É—à–∫–∞\n  result += `üåü *${name1}*\\n\\n`;\n  result += `‚úÖ _${name2}_\\n\\n`;\n  result += `‚ú®*sale:*\\n\\n`;\n  result += `üí∏ *price: ${price}‚ÇΩ*\\n\\n`;\n  result += `üèÖ*–†–µ–π—Ç–∏–Ω–≥*: (–†–ï–ô–¢–ò–ù–ì)\\n\\n`;\n  result += `üîó [–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ç–æ–≤–∞—Ä—É](${link})\\n`;\n  result += `\\n------\\n\\n`;\n}\n\nreturn {\n  json: {\n    chat_id: $json.chat_id || 0,\n    text: result.trim().substring(0, 4000),\n    parse_mode: 'Markdown',\n    disable_web_page_preview: false\n  }\n};\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-1000,2840],"id":"c5cd7b72-b5d0-4206-a1f2-9f471686b32d","name":"Code2","disabled":true},{"parameters":{"chatId":"={{ $json.chat_id }}","text":"={{ $json.text }}","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"üíñ –ü–æ–ª—É—á–∏—Ç—å –≤–µ—Å—å —Å–ø–∏—Å–æ–∫","additionalFields":{"callback_data":"={{ $json.reply_markup.inline_keyboard[0][0].callback_data }}"}}]}},{"row":{"buttons":[{"text":"üîÅ –•–æ—á—É –ø–æ–∑–∂–µ","additionalFields":{"callback_data":"={{ $json.reply_markup.inline_keyboard[1][0].callback_data }}"}}]}}]},"additionalFields":{}},"name":"–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∏—Å–∫–∞1","type":"n8n-nodes-base.telegram","typeVersion":1,"position":[2140,2540],"id":"baa4b7fc-30b7-4da4-858a-29f356f9aac2","webhookId":"1aa4a16e-2b28-417a-be38-5b785433341e","executeOnce":true,"credentials":{"telegramApi":{"id":"iZNX6D8v0FBJG5wC","name":"/Ai_Beauty_agent_bot"}}},{"parameters":{"amount":10},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[1680,2540],"id":"114a5d0f-d8ee-4fc2-a7ae-7088ec24cf8b","name":"Wait1","webhookId":"56b9100d-a89e-46db-83c4-ca5a965d3ff6"},{"parameters":{"workflowId":{"__rl":true,"value":"fb37qdR5lhRGoyfw","mode":"list","cachedResultName":"subscription"},"workflowInputs":{"mappingMode":"defineBelow","value":{},"matchingColumns":[],"schema":[],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{"waitForSubWorkflow":false}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[-1240,580],"id":"94d6381b-18b5-43a0-a673-5b887feea286","name":"Execute Workflow","disabled":true},{"parameters":{"jsCode":"{\n  \"chat_id\": {{$json.callback_query.from.id}},\n  \"message_id\": {{$json.callback_query.message.message_id}},\n  \"user_id\": {{$json.callback_query.from.id}},\n  \"username\": \"{{$json.callback_query.from.username}}\",\n  \"first_name\": \"{{$json.callback_query.from.first_name}}\",\n  \"subscription_type\": \"{{$json.callback_query.data}}\"\n}\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-800,2600],"id":"63c17e41-83e1-4595-8466-97c874e14017","name":"Code5","disabled":true},{"parameters":{"mode":"raw","jsonOutput":"{{({\n  chat_id: $json.callback_query.from.id,\n  message_id: $json.callback_query.message.message_id,\n  user_id: $json.callback_query.from.id,\n  username: $json.callback_query.from.username,\n  first_name: $json.callback_query.from.first_name,\n  subscription_type: $json.callback_query.data\n})}}","options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-2060,1660],"id":"72f89ac3-c60b-4c0f-a494-f877034d3562","name":"Edit Fields2","disabled":true},{"parameters":{"jsCode":"return [\n  {\n    json: {\n      chat_id: $json.callback_query.from.id,\n      message_id: $json.callback_query.message.message_id,\n      user_id: $json.callback_query.from.id,\n      username: $json.callback_query.from.username,\n      first_name: $json.callback_query.from.first_name,\n      subscription_type: $json.callback_query.data,\n    }\n  }\n];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-1360,1680],"id":"90d5e899-77ff-4987-bb56-05f8dd240b53","name":"Code6"},{"parameters":{"method":"POST","url":"https://primary-production-e7406.up.railway.app/webhook-test/5d204081-9cdb-4ab2-a61e-a5775a694f5b","sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"chat_id\": \"{{$json.chat_id}}\",\n  \"message_id\": \"{{$json.message_id}}\",\n  \"subscription_type\": \"{{$json.subscription_type}}\"\n}\n","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1080,1680],"id":"44e7b3d3-bcf2-4692-8c7d-6d5533c549e4","name":"HTTP Request1"},{"parameters":{"method":"POST","url":"https://api.telegram.org/bot7723075408:AAGmjJPE8EyK7bCN2hriXicMwa4NxpuhiDs/sendChatAction","sendBody":true,"bodyParameters":{"parameters":[{"name":"chat_id","value":"={{ $json.message.from.id }}"},{"name":"action","value":"typing"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1020,1000],"id":"2ca2d91d-8f55-454a-947e-c9d8679b4acf","name":"HTTP typing...1","alwaysOutputData":true,"onError":"continueRegularOutput"},{"parameters":{"documentId":{"__rl":true,"value":"1pwKWWWkJ6QbtfzYmL-einrtebOyk0KWIQoDdz6rKhpo","mode":"list","cachedResultName":"goldapple –¢–û–ù–ï–†","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1pwKWWWkJ6QbtfzYmL-einrtebOyk0KWIQoDdz6rKhpo/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":474824266,"mode":"list","cachedResultName":"https://goldapple.ru/catalogsea","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1pwKWWWkJ6QbtfzYmL-einrtebOyk0KWIQoDdz6rKhpo/edit#gid=474824266"},"options":{}},"type":"n8n-nodes-base.googleSheetsTool","typeVersion":4.6,"position":[540,3140],"id":"d4a5b74e-297e-4955-b473-46a8c19feeae","name":"–¢–û–ù–ï–†","credentials":{"googleSheetsOAuth2Api":{"id":"6vdQC6SPbqTKJEsT","name":"Google Sheets account"}}},{"parameters":{"documentId":{"__rl":true,"value":"1CAx-BEdk0XJqYBIV1NqhH8IFnpZWx4hXl6MfX6Z9ncU","mode":"list","cachedResultName":"–∫—Ä–µ–º –¥–ª—è –ª–∏—Ü–∞","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1CAx-BEdk0XJqYBIV1NqhH8IFnpZWx4hXl6MfX6Z9ncU/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":1836551119,"mode":"list","cachedResultName":"—Å—É—Ö–∞—è –∫–æ–∂–∞","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1CAx-BEdk0XJqYBIV1NqhH8IFnpZWx4hXl6MfX6Z9ncU/edit#gid=1836551119"},"options":{}},"type":"n8n-nodes-base.googleSheetsTool","typeVersion":4.6,"position":[980,3140],"id":"d23cd9fc-0e55-4c44-a4dc-8d7277a9f3e3","name":"–ö–†–ï–ú –î–õ–Ø –°–£–•–û–ô –ö–û–ñ–ò","credentials":{"googleSheetsOAuth2Api":{"id":"6vdQC6SPbqTKJEsT","name":"Google Sheets account"}}},{"parameters":{"documentId":{"__rl":true,"value":"1pwKWWWkJ6QbtfzYmL-einrtebOyk0KWIQoDdz6rKhpo","mode":"list","cachedResultName":"goldapple –¢–û–ù–ï–†","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1pwKWWWkJ6QbtfzYmL-einrtebOyk0KWIQoDdz6rKhpo/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":474824266,"mode":"list","cachedResultName":"https://goldapple.ru/catalogsea","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1pwKWWWkJ6QbtfzYmL-einrtebOyk0KWIQoDdz6rKhpo/edit#gid=474824266"},"options":{}},"type":"n8n-nodes-base.googleSheetsTool","typeVersion":4.6,"position":[820,3400],"id":"0054f045-bfbf-48e4-86a7-221972e199a8","name":"SPF","credentials":{"googleSheetsOAuth2Api":{"id":"6vdQC6SPbqTKJEsT","name":"Google Sheets account"}}},{"parameters":{"documentId":{"__rl":true,"value":"1pwKWWWkJ6QbtfzYmL-einrtebOyk0KWIQoDdz6rKhpo","mode":"list","cachedResultName":"goldapple –¢–û–ù–ï–†","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1pwKWWWkJ6QbtfzYmL-einrtebOyk0KWIQoDdz6rKhpo/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":474824266,"mode":"list","cachedResultName":"https://goldapple.ru/catalogsea","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1pwKWWWkJ6QbtfzYmL-einrtebOyk0KWIQoDdz6rKhpo/edit#gid=474824266"},"options":{}},"type":"n8n-nodes-base.googleSheetsTool","typeVersion":4.6,"position":[1180,3400],"id":"6f32ea1f-1fff-40e7-b2b2-f1bb26469b00","name":"–ö–†–ï–ú –î–õ–Ø –ñ–ò–†–ù–û–ô –ö–û–ñ–ò","credentials":{"googleSheetsOAuth2Api":{"id":"6vdQC6SPbqTKJEsT","name":"Google Sheets account"}}},{"parameters":{"documentId":{"__rl":true,"value":"1CAx-BEdk0XJqYBIV1NqhH8IFnpZWx4hXl6MfX6Z9ncU","mode":"list","cachedResultName":"–∫—Ä–µ–º –¥–ª—è –ª–∏—Ü–∞","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1CAx-BEdk0XJqYBIV1NqhH8IFnpZWx4hXl6MfX6Z9ncU/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":35436979,"mode":"list","cachedResultName":"–Ω–æ—Ä–º–∞–ª—å–Ω–∞—è –∫–æ–∂–∞","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1CAx-BEdk0XJqYBIV1NqhH8IFnpZWx4hXl6MfX6Z9ncU/edit#gid=35436979"},"options":{}},"type":"n8n-nodes-base.googleSheetsTool","typeVersion":4.6,"position":[800,3140],"id":"1df981d3-b8f7-4c51-8540-69d2f96931d7","name":"–ö–†–ï–ú –î–õ–Ø –ù–û–†–ú–ê–õ–¨–ù–û–ô –ö–û–ñ–ò","credentials":{"googleSheetsOAuth2Api":{"id":"6vdQC6SPbqTKJEsT","name":"Google Sheets account"}}},{"parameters":{"documentId":{"__rl":true,"value":"1CAx-BEdk0XJqYBIV1NqhH8IFnpZWx4hXl6MfX6Z9ncU","mode":"list","cachedResultName":"–∫—Ä–µ–º –¥–ª—è –ª–∏—Ü–∞","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1CAx-BEdk0XJqYBIV1NqhH8IFnpZWx4hXl6MfX6Z9ncU/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":1523024371,"mode":"list","cachedResultName":"–∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–∂–∞","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1CAx-BEdk0XJqYBIV1NqhH8IFnpZWx4hXl6MfX6Z9ncU/edit#gid=1523024371"},"options":{}},"type":"n8n-nodes-base.googleSheetsTool","typeVersion":4.6,"position":[1160,3140],"id":"77189fae-5f18-4897-a9a8-e9e76393cbcb","name":"–ö–†–ï–ú –î–õ–Ø –ö–û–ú–ë–ò–ù–ò–†–û–í–ê–ù–ù–û–ô –ö–û–ñ–ò","credentials":{"googleSheetsOAuth2Api":{"id":"6vdQC6SPbqTKJEsT","name":"Google Sheets account"}}}],"connections":{"Get Image1":{"main":[[{"node":"Extract1","type":"main","index":0}]]},"Convert1":{"main":[[{"node":"VISION","type":"main","index":0}]]},"Get ready1":{"main":[[{"node":"Get Image1","type":"main","index":0}]]},"Extract1":{"main":[[{"node":"Convert1","type":"main","index":0}]]},"VISION":{"main":[[{"node":"Append or update row in sheet5","type":"main","index":0}]]},"Parse Vision":{"main":[[{"node":"Switch6","type":"main","index":0}]]},"Telegram Trigger":{"main":[[{"node":"Switch","type":"main","index":0},{"node":"HTTP typing...1","type":"main","index":0}]]},"–ë—é–¥–∂–µ—Ç":{"main":[[{"node":"–ö–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä –±—é–¥–∂–µ—Ç–∞","type":"main","index":0}]]},"Search Agent":{"main":[[{"node":"Append or update row in sheet2","type":"main","index":0}],[{"node":"Send a text message2","type":"main","index":0}]]},"Switch":{"main":[[{"node":"Switch1","type":"main","index":0}],[{"node":"Get ready1","type":"main","index":0}],[{"node":"–ë—é–¥–∂–µ—Ç3","type":"main","index":0}],[{"node":"–±—é–¥–∂–µ—Ç","type":"main","index":0}],[{"node":"Code4","type":"main","index":0}],[{"node":"–ø–æ–¥–ø–∏—Å–∫–∞ —Å –ø—Ä–∏–±–æ—Ä–æ–º","type":"main","index":0}],[{"node":"extract","type":"main","index":0}],[],[{"node":"extract1","type":"main","index":0}],[{"node":"–±—é–¥–∂–µ—Ç","type":"main","index":0}],[{"node":"–±—é–¥–∂–µ—Ç","type":"main","index":0}],[{"node":"–±—é–¥–∂–µ—Ç","type":"main","index":0}],[{"node":"–ë—é–¥–∂–µ—Ç3","type":"main","index":0}],[{"node":"–ë—é–¥–∂–µ—Ç3","type":"main","index":0}],[{"node":"–ë—é–¥–∂–µ—Ç3","type":"main","index":0}],[{"node":"extract3","type":"main","index":0}],[{"node":"extract3","type":"main","index":0}],[{"node":"extract3","type":"main","index":0}],[{"node":"extract3","type":"main","index":0}],[{"node":"–ë—é–¥–∂–µ—Ç6","type":"main","index":0}],[{"node":"–ë—é–¥–∂–µ—Ç6","type":"main","index":0}],[{"node":"–ë—é–¥–∂–µ—Ç6","type":"main","index":0}],[{"node":"–ë—é–¥–∂–µ—Ç6","type":"main","index":0}],[{"node":"Code6","type":"main","index":0}]]},"–ö–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä –±—é–¥–∂–µ—Ç–∞":{"main":[[]]},"Code3":{"main":[[{"node":"–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∏—Å–∫–∞1","type":"main","index":0}]]},"Code4":{"main":[[{"node":"–ü—Ä–µ–¥–ª–æ–¥–∂–µ–Ω–∏–µ –Ω–∞ –ø–æ–¥–ø–∏—Å–∫—É","type":"main","index":0}]]},"Code":{"main":[[]]},"extract":{"main":[[{"node":"Append or update row in sheet3","type":"main","index":0}]]},"–ë—é–¥–∂–µ—Ç1":{"main":[[{"node":"–ö–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä –±—é–¥–∂–µ—Ç–∞1","type":"main","index":0}]]},"start":{"main":[[{"node":"Wait","type":"main","index":0}]]},"IF NO":{"main":[[{"node":"–∑–∞–ø–∏—Å—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è","type":"main","index":0}],[{"node":"start","type":"main","index":0}]]},"GET profile":{"main":[[{"node":"IF NO","type":"main","index":0}]]},"–∑–∞–ø–∏—Å—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è":{"main":[[{"node":"start","type":"main","index":0}]]},"–ü–æ–¥–ø–∏—Å–∞–ª—Å—è –ª–∏ —á–µ–ª–æ–≤–µ–∫?":{"main":[[{"node":"–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º","type":"main","index":0}],[{"node":"–ü—Ä–æ—Å–∏–º –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ –Ω–µ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ","type":"main","index":0}]]},"–ü—Ä–æ—Å–∏–º –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ –Ω–µ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ":{"main":[[{"node":"–ù–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏1","type":"main","index":0}]]},"–ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–ø–∏—Å–∞–ª—Å—è –ª–∏ —á–µ–ª–æ–≤–µ–∫":{"main":[[{"node":"–ü–æ–¥–ø–∏—Å–∞–ª—Å—è –ª–∏ —á–µ–ª–æ–≤–µ–∫?","type":"main","index":0}]]},"–ù–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏1":{"main":[[{"node":"–ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–ø–∏—Å–∞–ª—Å—è –ª–∏ —á–µ–ª–æ–≤–µ–∫","type":"main","index":0}]]},"–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º":{"main":[[]]},"Switch1":{"main":[[{"node":"GET profile","type":"main","index":0}],[{"node":"–ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–ø–∏—Å–∞–ª—Å—è –ª–∏ —á–µ–ª–æ–≤–µ–∫","type":"main","index":0}]]},"Edit Fields1":{"main":[[]]},"Append or update row in sheet2":{"main":[[{"node":"–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∏—Å–∫–∞","type":"main","index":0}]]},"Append or update row in sheet3":{"main":[[{"node":"–ë—é–¥–∂–µ—Ç1","type":"main","index":0}]]},"Append or update row in sheet5":{"main":[[{"node":"Parse Vision","type":"main","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"Information Extractor","type":"ai_languageModel","index":0}]]},"Append or update row in sheet6":{"main":[[{"node":"–ë—é–¥–∂–µ—Ç","type":"main","index":0}]]},"–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∏—Å–∫–∞":{"main":[[{"node":"Wait1","type":"main","index":0}]]},"Wait":{"main":[[{"node":"Edit Fields1","type":"main","index":0}]]},"Webhook":{"main":[[{"node":"Get ready1","type":"main","index":0}]]},"Switch6":{"main":[[{"node":"—Ç–∏–ø –∫–æ–∂–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω1","type":"main","index":0}],[{"node":"–¢–∏–ø –∫–æ–∂–∏ –ù–ï –æ—Ç–ø—Ä–µ–¥–µ–ª–µ–Ω1","type":"main","index":0}]]},"–±—é–¥–∂–µ—Ç":{"main":[[{"node":"Send a text message","type":"main","index":0}]]},"–±–µ—Ä–µ—Ç –¥–∞–Ω–Ω—ã–µ –±—é–¥–∂–µ—Ç –∏ —Ç–∏–ø –∫–æ–∂–∏":{"main":[[{"node":"Code1","type":"main","index":0}]]},"Send a text message":{"main":[[{"node":"–±–µ—Ä–µ—Ç –¥–∞–Ω–Ω—ã–µ –±—é–¥–∂–µ—Ç –∏ —Ç–∏–ø –∫–æ–∂–∏","type":"main","index":0}]]},"–ø–æ–¥–ø–∏—Å–∫–∞ —Å –ø—Ä–∏–±–æ—Ä–æ–º":{"main":[[{"node":"–í—ã–±–æ—Ä –ø–æ–¥–ø–∏—Å–∫–∏","type":"main","index":0}]]},"extract1":{"main":[[{"node":"Append or update row in sheet","type":"main","index":0}]]},"–ë—é–¥–∂–µ—Ç2":{"main":[[{"node":"–ö–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä –±—é–¥–∂–µ—Ç–∞2","type":"main","index":0}]]},"Append or update row in sheet":{"main":[[{"node":"–ë—é–¥–∂–µ—Ç2","type":"main","index":0}]]},"–ë—é–¥–∂–µ—Ç3":{"main":[[{"node":"Append or update row in sheet6","type":"main","index":0}]]},"extract3":{"main":[[{"node":"Append or update row in sheet4","type":"main","index":0}]]},"–ë—é–¥–∂–µ—Ç4":{"main":[[{"node":"–ö–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä –±—é–¥–∂–µ—Ç–∞3","type":"main","index":0}]]},"Append or update row in sheet4":{"main":[[{"node":"–ë—é–¥–∂–µ—Ç4","type":"main","index":0}]]},"–ë—é–¥–∂–µ—Ç5":{"main":[[{"node":"–ö–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä –±—é–¥–∂–µ—Ç–∞4","type":"main","index":0}]]},"Append or update row in sheet7":{"main":[[{"node":"–ë—é–¥–∂–µ—Ç5","type":"main","index":0}]]},"–ë—é–¥–∂–µ—Ç6":{"main":[[{"node":"Append or update row in sheet7","type":"main","index":0}]]},"Code1":{"main":[[{"node":"Search Agent","type":"main","index":0}]]},"OpenAI Chat Model1":{"ai_languageModel":[[{"node":"Search Agent","type":"ai_languageModel","index":0}]]},"Code2":{"main":[[]]},"Wait1":{"main":[[{"node":"Code3","type":"main","index":0}]]},"Execute Workflow":{"main":[[]]},"Edit Fields2":{"main":[[]]},"Code6":{"main":[[{"node":"HTTP Request1","type":"main","index":0}]]},"–¢–û–ù–ï–†":{"ai_tool":[[{"node":"Search Agent","type":"ai_tool","index":0}]]},"–ö–†–ï–ú –î–õ–Ø –°–£–•–û–ô –ö–û–ñ–ò":{"ai_tool":[[]]},"SPF":{"ai_tool":[[]]},"–ö–†–ï–ú –î–õ–Ø –ñ–ò–†–ù–û–ô –ö–û–ñ–ò":{"ai_tool":[[]]},"–ö–†–ï–ú –î–õ–Ø –ù–û–†–ú–ê–õ–¨–ù–û–ô –ö–û–ñ–ò":{"ai_tool":[[]]},"–ö–†–ï–ú –î–õ–Ø –ö–û–ú–ë–ò–ù–ò–†–û–í–ê–ù–ù–û–ô –ö–û–ñ–ò":{"ai_tool":[[]]}},"settings":{"executionOrder":"v1","callerPolicy":"workflowsFromSameOwner","errorWorkflow":"pB6Mi8g6Z5wz472U"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"856a563c-71a1-47fb-9452-8951a29839de","triggerCount":1,"tags":[]}